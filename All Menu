-- X - V3N0M v1.0 by Nazam Official
-- Fixed Effective + Stealth Teleport System

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")

local VenomSystem = {
    positions = {},
    isRunning = false,
    currentIndex = 1,
    menuVisible = true,
    teleportCooldown = 1.2, -- Cooldown lebih lama untuk stealth
    lastTeleport = 0,
    lastLoadClick = 0
}

-- Color Theme: Red, White, Black
local Theme = {
    primary = Color3.fromRGB(200, 0, 0),
    secondary = Color3.fromRGB(255, 255, 255),
    background = Color3.fromRGB(15, 15, 15),
    accent = Color3.fromRGB(150, 0, 0),
    success = Color3.fromRGB(0, 180, 0),
    warning = Color3.fromRGB(255, 80, 80),
    info = Color3.fromRGB(0, 120, 200)
}

-- Compact Sizes
local Sizes = {
    mainFrame = UDim2.new(0, 220, 0, 300),
    titleHeight = 28,
    buttonHeight = 32,
    posItemHeight = 36,
    spacing = 5
}

-- FIXED Save System
local function savePositions()
    if #VenomSystem.positions == 0 then
        print("Tidak ada posisi untuk disimpan")
        return false
    end
    
    local success, result = pcall(function()
        local saveData = {}
        for i, pos in ipairs(VenomSystem.positions) do
            if pos then
                saveData[i] = {
                    X = pos.X, Y = pos.Y, Z = pos.Z,
                    RX = pos.RightVector.X, RY = pos.RightVector.Y, RZ = pos.RightVector.Z,
                    UX = pos.UpVector.X, UY = pos.UpVector.Y, UZ = pos.UpVector.Z,
                    LX = pos.LookVector.X, LY = pos.LookVector.Y, LZ = pos.LookVector.Z
                }
            end
        end
        
        -- Gunakan nama file yang lebih spesifik
        writefile("venom_positions_v2.json", HttpService:JSONEncode(saveData))
        return true
    end)
    
    if success then
        print("‚úÖ Posisi berhasil disimpan: " .. #VenomSystem.positions .. " posisi")
        return true
    else
        print("‚ùå Gagal menyimpan: " .. tostring(result))
        return false
    end
end

-- FIXED Load System
local function loadPositions()
    local success, result = pcall(function()
        -- Coba beberapa nama file untuk compatibility
        local filenames = {"venom_positions_v2.json", "venom_save.json", "venom_positions.json"}
        
        for _, filename in ipairs(filenames) do
            if isfile(filename) then
                local fileData = readfile(filename)
                local data = HttpService:JSONDecode(fileData)
                
                if data then
                    VenomSystem.positions = {}
                    for i = 1, #data do
                        local posData = data[i]
                        if posData then
                            VenomSystem.positions[i] = CFrame.new(
                                posData.X, posData.Y, posData.Z,
                                posData.RX, posData.RY, posData.RZ,
                                posData.UX, posData.UY, posData.UZ,
                                posData.LX, posData.LY, posData.LZ
                            )
                        end
                    end
                    
                    -- Validasi data yang dimuat
                    local validPositions = 0
                    for i, pos in ipairs(VenomSystem.positions) do
                        if pos then validPositions += 1 end
                    end
                    
                    print("‚úÖ Posisi dimuat: " .. validPositions .. " posisi valid")
                    VenomSystem:updatePositionsList()
                    return true
                end
            end
        end
        return false
    end)
    
    if not success then
        print("‚ùå Tidak ada data posisi yang ditemukan")
        VenomSystem.positions = {}
        VenomSystem:updatePositionsList()
    end
    
    return success
end

-- EFFECTIVE + STEALTH TELEPORT
local function stealthEffectiveTeleport(cframe)
    if tick() - VenomSystem.lastTeleport < VenomSystem.teleportCooldown then
        return false
    end
    
    VenomSystem.lastTeleport = tick()
    
    local character = Players.LocalPlayer.Character
    if not character then return false end

    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return false end

    local success = pcall(function()
        -- 1. Simpan state asli
        local originalPosition = rootPart.CFrame
        local originalTransparency = {}
        
        -- 2. Sembunyikan avatar sementara (0.08 detik)
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                originalTransparency[part] = part.Transparency
                part.Transparency = 0.8 -- Semi-transparent
            end
        end
        
        -- 3. Teleport ke checkpoint (SANGAT CEPAT)
        rootPart.CFrame = cframe
        
        -- 4. Tunggu sebentar untuk collision detection
        wait(0.08)
        
        -- 5. Kembalikan ke posisi asli
        rootPart.CFrame = originalPosition
        
        -- 6. Restore transparency
        wait(0.02)
        for part, transparency in pairs(originalTransparency) do
            if part and part.Parent then
                part.Transparency = transparency
            end
        end
        
        -- 7. Network manipulation untuk reduce visibility
        rootPart:SetNetworkOwner(nil)
        wait(0.01)
        rootPart:SetNetworkOwner(Players.LocalPlayer)
    end)
    
    return success
end

-- Auto Teleport Loop
local function startAutoTeleport()
    if #VenomSystem.positions == 0 then 
        print("‚ùå Tidak ada posisi yang diset!")
        return 
    end
    if VenomSystem.isRunning then return end
    
    VenomSystem.isRunning = true
    VenomSystem.currentIndex = VenomSystem.currentIndex or 1
    
    local startBtn = VenomSystem.gui:FindFirstChild("StartBtn", true)
    if startBtn then
        startBtn.Text = "RUNNING"
        startBtn.BackgroundColor3 = Theme.success
    end
    
    print("üöÄ Memulai auto teleport ke " .. #VenomSystem.positions .. " checkpoint...")
    
    spawn(function()
        while VenomSystem.isRunning and #VenomSystem.positions > 0 do
            if VenomSystem.currentIndex > #VenomSystem.positions then
                VenomSystem.currentIndex = 1
            end
            
            local targetCFrame = VenomSystem.positions[VenomSystem.currentIndex]
            if targetCFrame then
                print("üìç Checkpoint " .. VenomSystem.currentIndex)
                stealthEffectiveTeleport(targetCFrame)
                VenomSystem.currentIndex += 1
            end
            
            wait(VenomSystem.teleportCooldown)
        end
    end)
end

-- Stop Auto Teleport
local function stopAutoTeleport()
    VenomSystem.isRunning = false
    
    local startBtn = VenomSystem.gui:FindFirstChild("StartBtn", true)
    if startBtn then
        startBtn.Text = "START"
        startBtn.BackgroundColor3 = Theme.primary
    end
    print("‚èπÔ∏è Auto teleport dihentikan")
end

-- Direct Teleport (Normal)
local function directTeleport(index)
    if VenomSystem.positions[index] then
        local character = Players.LocalPlayer.Character
        if character then
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                rootPart.CFrame = VenomSystem.positions[index]
                print("üéØ Teleport manual ke posisi " .. index)
            end
        end
    else
        print("‚ùå Posisi " .. index .. " belum diset!")
    end
end

-- Add New Position with Auto-Save
local function addPosition()
    local character = Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local newIndex = #VenomSystem.positions + 1
        VenomSystem.positions[newIndex] = character.HumanoidRootPart.CFrame
        VenomSystem:updatePositionsList()
        
        -- Auto-save setiap tambah posisi
        spawn(function()
            savePositions()
        end)
        
        print("‚úÖ Posisi " .. newIndex .. " disimpan")
    else
        print("‚ùå Character tidak ditemukan!")
    end
end

-- Delete Position with Auto-Save
local function deletePosition(index)
    if VenomSystem.positions[index] then
        table.remove(VenomSystem.positions, index)
        
        -- Reindex positions
        local newPositions = {}
        for i, pos in ipairs(VenomSystem.positions) do
            newPositions[i] = pos
        end
        VenomSystem.positions = newPositions
        
        VenomSystem:updatePositionsList()
        
        -- Auto-save setiap hapus posisi
        spawn(function()
            savePositions()
        end)
        
        print("üóëÔ∏è Posisi " .. index .. " dihapus")
    end
end

-- FIXED LOAD Button Handler
local function handleLoadButton()
    local currentTime = tick()
    
    if currentTime - VenomSystem.lastLoadClick < 0.5 then
        -- Double click: Save current positions
        print("üíæ Menyimpan posisi...")
        savePositions()
        VenomSystem.lastLoadClick = 0
    else
        -- Single click: Load saved positions
        print("üìÇ Memuat posisi...")
        loadPositions()
        VenomSystem.lastLoadClick = currentTime
    end
end

-- GUI Creation (tetap sama)
function VenomSystem:createGUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "VenomV1_NazamOfficial"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
    
    self.gui = screenGui
    
    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = Sizes.mainFrame
    mainFrame.Position = UDim2.new(0, 10, 0, 10)
    mainFrame.BackgroundColor3 = Theme.background
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.ClipsDescendants = true
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = screenGui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 6)
    mainCorner.Parent = mainFrame
    
    local mainStroke = Instance.new("UIStroke")
    mainStroke.Color = Theme.primary
    mainStroke.Thickness = 1
    mainStroke.Parent = mainFrame
    
    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, Sizes.titleHeight)
    titleBar.Position = UDim2.new(0, 0, 0, 0)
    titleBar.BackgroundColor3 = Theme.primary
    titleBar.BorderSizePixel = 0
    titleBar.Name = "TitleBar"
    titleBar.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 6)
    titleCorner.Parent = titleBar
    
    -- Title Text
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(0.6, 0, 1, 0)
    titleLabel.Position = UDim2.new(0.05, 0, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextColor3 = Theme.secondary
    titleLabel.Text = "V3N0M"
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 12
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = titleBar
    
    -- Close Button (X)
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 22, 0, 22)
    closeBtn.Position = UDim2.new(1, -25, 0.5, -11)
    closeBtn.BackgroundColor3 = Theme.accent
    closeBtn.TextColor3 = Theme.secondary
    closeBtn.Text = "X"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 10
    closeBtn.AutoButtonColor = false
    closeBtn.Name = "CloseBtn"
    closeBtn.Parent = titleBar
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 4)
    closeCorner.Parent = closeBtn
    
    closeBtn.MouseEnter:Connect(function()
        closeBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    end)
    
    closeBtn.MouseLeave:Connect(function()
        closeBtn.BackgroundColor3 = Theme.accent
    end)
    
    -- Make Draggable
    local dragging = false
    local dragInput, dragStart, startPos
    
    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    titleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- Content Area
    local contentFrame = Instance.new("Frame")
    contentFrame.Size = UDim2.new(1, 0, 1, -Sizes.titleHeight)
    contentFrame.Position = UDim2.new(0, 0, 0, Sizes.titleHeight)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame
    
    -- Left Side - Positions List
    local positionsFrame = Instance.new("ScrollingFrame")
    positionsFrame.Size = UDim2.new(0.58, 0, 1, -40)
    positionsFrame.Position = UDim2.new(0, 0, 0, 0)
    positionsFrame.BackgroundTransparency = 1
    positionsFrame.BorderSizePixel = 0
    positionsFrame.ScrollBarThickness = 3
    positionsFrame.ScrollBarImageColor3 = Theme.primary
    positionsFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    positionsFrame.Name = "PositionsFrame"
    positionsFrame.Parent = contentFrame
    
    -- Right Side - Control Buttons
    local controlsFrame = Instance.new("Frame")
    controlsFrame.Size = UDim2.new(0.38, 0, 1, -40)
    controlsFrame.Position = UDim2.new(0.6, 0, 0, 0)
    controlsFrame.BackgroundTransparency = 1
    controlsFrame.Parent = contentFrame
    
    -- Control Buttons (Vertical)
    local startBtn = Instance.new("TextButton")
    startBtn.Size = UDim2.new(1, 0, 0, Sizes.buttonHeight)
    startBtn.Position = UDim2.new(0, 0, 0, Sizes.spacing)
    startBtn.BackgroundColor3 = Theme.primary
    startBtn.TextColor3 = Theme.secondary
    startBtn.Text = "START"
    startBtn.Font = Enum.Font.GothamBold
    startBtn.TextSize = 11
    startBtn.AutoButtonColor = false
    startBtn.Name = "StartBtn"
    startBtn.Parent = controlsFrame
    
    local startCorner = Instance.new("UICorner")
    startCorner.CornerRadius = UDim.new(0, 4)
    startCorner.Parent = startBtn
    
    local setPosBtn = Instance.new("TextButton")
    setPosBtn.Size = UDim2.new(1, 0, 0, Sizes.buttonHeight)
    setPosBtn.Position = UDim2.new(0, 0, 0, Sizes.buttonHeight + Sizes.spacing * 2)
    setPosBtn.BackgroundColor3 = Theme.primary
    setPosBtn.TextColor3 = Theme.secondary
    setPosBtn.Text = "SET POSISI"
    setPosBtn.Font = Enum.Font.GothamBold
    setPosBtn.TextSize = 10
    setPosBtn.AutoButtonColor = false
    setPosBtn.Name = "SetPosBtn"
    setPosBtn.Parent = controlsFrame
    
    local setPosCorner = Instance.new("UICorner")
    setPosCorner.CornerRadius = UDim.new(0, 4)
    setPosCorner.Parent = setPosBtn
    
    local stopBtn = Instance.new("TextButton")
    stopBtn.Size = UDim2.new(1, 0, 0, Sizes.buttonHeight)
    stopBtn.Position = UDim2.new(0, 0, 0, Sizes.buttonHeight * 2 + Sizes.spacing * 3)
    stopBtn.BackgroundColor3 = Theme.accent
    stopBtn.TextColor3 = Theme.secondary
    stopBtn.Text = "STOP"
    stopBtn.Font = Enum.Font.GothamBold
    stopBtn.TextSize = 11
    stopBtn.AutoButtonColor = false
    stopBtn.Name = "StopBtn"
    stopBtn.Parent = controlsFrame
    
    local stopCorner = Instance.new("UICorner")
    stopCorner.CornerRadius = UDim.new(0, 4)
    stopCorner.Parent = stopBtn
    
    -- LOAD Button at Bottom
    local loadBtn = Instance.new("TextButton")
    loadBtn.Size = UDim2.new(0.9, 0, 0, 30)
    loadBtn.Position = UDim2.new(0.05, 0, 1, -35)
    loadBtn.BackgroundColor3 = Theme.info
    loadBtn.TextColor3 = Theme.secondary
    loadBtn.Text = "LOAD"
    loadBtn.Font = Enum.Font.GothamBold
    loadBtn.TextSize = 11
    loadBtn.AutoButtonColor = false
    loadBtn.Name = "LoadBtn"
    loadBtn.Parent = contentFrame
    
    local loadCorner = Instance.new("UICorner")
    loadCorner.CornerRadius = UDim.new(0, 4)
    loadCorner.Parent = loadBtn
    
    loadBtn.MouseEnter:Connect(function()
        loadBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    end)
    
    loadBtn.MouseLeave:Connect(function()
        loadBtn.BackgroundColor3 = Theme.info
    end)
    
    -- Mini Icon
    local miniIcon = Instance.new("TextButton")
    miniIcon.Size = UDim2.new(0, 30, 0, 30)
    miniIcon.Position = UDim2.new(0, 10, 0, 10)
    miniIcon.BackgroundColor3 = Theme.primary
    miniIcon.TextColor3 = Theme.secondary
    miniIcon.Text = "V"
    miniIcon.Font = Enum.Font.GothamBold
    miniIcon.TextSize = 12
    miniIcon.AutoButtonColor = true
    miniIcon.Name = "MiniIcon"
    miniIcon.Visible = false
    miniIcon.ZIndex = 10
    miniIcon.Parent = screenGui
    
    local miniCorner = Instance.new("UICorner")
    miniCorner.CornerRadius = UDim.new(0, 6)
    miniCorner.Parent = miniIcon
    
    local miniStroke = Instance.new("UIStroke")
    miniStroke.Color = Theme.secondary
    miniStroke.Thickness = 1
    miniStroke.Parent = miniIcon
    
    -- Make Mini Icon Draggable
    local miniDragging = false
    local miniDragInput, miniDragStart, miniStartPos
    
    miniIcon.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            miniDragging = true
            miniDragStart = input.Position
            miniStartPos = miniIcon.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    miniDragging = false
                end
            end)
        end
    end)
    
    miniIcon.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            miniDragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == miniDragInput and miniDragging then
            local delta = input.Position - miniDragStart
            miniIcon.Position = UDim2.new(
                miniStartPos.X.Scale, 
                miniStartPos.X.Offset + delta.X,
                miniStartPos.Y.Scale, 
                miniStartPos.Y.Offset + delta.Y
            )
        end
    end)
    
    return screenGui, mainFrame, miniIcon
end

-- Update Positions List
function VenomSystem:updatePositionsList()
    local positionsFrame = self.gui:FindFirstChild("PositionsFrame", true)
    if not positionsFrame then return end
    
    for _, child in pairs(positionsFrame:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    positionsFrame.CanvasSize = UDim2.new(0, 0, 0, #self.positions * (Sizes.posItemHeight + Sizes.spacing))
    
    for i, position in ipairs(self.positions) do
        local posFrame = Instance.new("Frame")
        posFrame.Size = UDim2.new(0.95, 0, 0, Sizes.posItemHeight)
        posFrame.Position = UDim2.new(0.025, 0, 0, (i - 1) * (Sizes.posItemHeight + Sizes.spacing))
        posFrame.BackgroundColor3 = Theme.secondary
        posFrame.BackgroundTransparency = 0.9
        posFrame.BorderSizePixel = 0
        posFrame.Parent = positionsFrame
        
        local posCorner = Instance.new("UICorner")
        posCorner.CornerRadius = UDim.new(0, 4)
        posCorner.Parent = posFrame
        
        local posStroke = Instance.new("UIStroke")
        posStroke.Color = Theme.primary
        posStroke.Thickness = 1
        posStroke.Parent = posFrame
        
        -- Position Label
        local posLabel = Instance.new("TextLabel")
        posLabel.Size = UDim2.new(0.45, 0, 1, 0)
        posLabel.Position = UDim2.new(0.05, 0, 0, 0)
        posLabel.BackgroundTransparency = 1
        posLabel.TextColor3 = Theme.secondary
        posLabel.Text = "P" .. i
        posLabel.Font = Enum.Font.GothamSemibold
        posLabel.TextSize = 10
        posLabel.TextXAlignment = Enum.TextXAlignment.Left
        posLabel.Parent = posFrame
        
        -- TP Button
        local tpBtn = Instance.new("TextButton")
        tpBtn.Size = UDim2.new(0.2, 0, 0.6, 0)
        tpBtn.Position = UDim2.new(0.5, 0, 0.2, 0)
        tpBtn.BackgroundColor3 = Theme.primary
        tpBtn.TextColor3 = Theme.secondary
        tpBtn.Text = "TP"
        tpBtn.Font = Enum.Font.GothamBold
        tpBtn.TextSize = 8
        tpBtn.AutoButtonColor = false
        tpBtn.Name = "TPBtn_" .. i
        tpBtn.Parent = posFrame
        
        local tpCorner = Instance.new("UICorner")
        tpCorner.CornerRadius = UDim.new(0, 3)
        tpCorner.Parent = tpBtn
        
        tpBtn.MouseEnter:Connect(function()
            tpBtn.BackgroundColor3 = Theme.accent
        end)
        
        tpBtn.MouseLeave:Connect(function()
            tpBtn.BackgroundColor3 = Theme.primary
        end)
        
        -- Delete Button
        local delBtn = Instance.new("TextButton")
        delBtn.Size = UDim2.new(0.2, 0, 0.6, 0)
        delBtn.Position = UDim2.new(0.75, 0, 0.2, 0)
        delBtn.BackgroundColor3 = Theme.warning
        delBtn.TextColor3 = Theme.secondary
        delBtn.Text = "X"
        delBtn.Font = Enum.Font.GothamBold
        delBtn.TextSize = 8
        delBtn.AutoButtonColor = false
        delBtn.Name = "DelBtn_" .. i
        delBtn.Parent = posFrame
        
        local delCorner = Instance.new("UICorner")
        delCorner.CornerRadius = UDim.new(0, 3)
        delCorner.Parent = delBtn
        
        delBtn.MouseEnter:Connect(function()
            delBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
        end)
        
        delBtn.MouseLeave:Connect(function()
            delBtn.BackgroundColor3 = Theme.warning
        end)
        
        -- Button Events
        tpBtn.MouseButton1Click:Connect(function()
            directTeleport(i)
        end)
        
        delBtn.MouseButton1Click:Connect(function()
            deletePosition(i)
        end)
    end
end

-- Toggle Menu Visibility
function VenomSystem:toggleMenu()
    self.menuVisible = not self.menuVisible
    self.mainFrame.Visible = self.menuVisible
    self.miniIcon.Visible = not self.menuVisible
end

-- Setup Event Handlers
function VenomSystem:setupEvents()
    local closeBtn = self.gui:FindFirstChild("CloseBtn", true)
    local startBtn = self.gui:FindFirstChild("StartBtn", true)
    local setPosBtn = self.gui:FindFirstChild("SetPosBtn", true)
    local stopBtn = self.gui:FindFirstChild("StopBtn", true)
    local loadBtn = self.gui:FindFirstChild("LoadBtn", true)
    local miniIcon = self.gui:FindFirstChild("MiniIcon", true)
    
    if closeBtn then
        closeBtn.MouseButton1Click:Connect(function()
            self:toggleMenu()
        end)
    end
    
    if startBtn then
        startBtn.MouseButton1Click:Connect(function()
            if not self.isRunning then
                startAutoTeleport()
            end
        end)
    end
    
    if setPosBtn then
        setPosBtn.MouseButton1Click:Connect(function()
            addPosition()
        end)
    end
    
    if stopBtn then
        stopBtn.MouseButton1Click:Connect(function()
            stopAutoTeleport()
        end)
    end
    
    if loadBtn then
        loadBtn.MouseButton1Click:Connect(function()
            handleLoadButton()
        end)
    end
    
    if miniIcon then
        miniIcon.MouseButton1Click:Connect(function()
            self:toggleMenu()
        end)
    end
end

-- Initialize System
function VenomSystem:init()
    local screenGui, mainFrame, miniIcon = self:createGUI()
    self.gui = screenGui
    self.mainFrame = mainFrame
    self.miniIcon = miniIcon
    
    self:setupEvents()
    self:updatePositionsList()
    
    -- Auto-load saat start
    spawn(function()
        wait(1)
        loadPositions()
    end)
    
    print("üéØ V3N0M v1.0 - Fixed System Ready")
    print("‚úÖ Effective + Stealth Teleport")
    print("‚úÖ Fixed Save/Load System") 
    print("‚úÖ Auto-save on Add/Delete")
end

-- Start the System
VenomSystem:init()
