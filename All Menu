
local Player = game.Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = PlayerGui
ScreenGui.Enabled = true
ScreenGui.ResetOnSpawn = false
ScreenGui.Name = "V3N0M GUI"

-- Main Frame (LEBIH KECIL & COMPACT)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 480, 0, 320)
MainFrame.Position = UDim2.new(0.5, -240, 0.5, -160)
MainFrame.BackgroundColor3 = Color3.fromRGB(8, 8, 8)
MainFrame.BackgroundTransparency = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 15)
mainCorner.Parent = MainFrame

local mainStroke = Instance.new("UIStroke")
mainStroke.Color = Color3.fromRGB(255, 215, 0)
mainStroke.Thickness = 2
mainStroke.Parent = MainFrame

-- Navbar
local Navbar = Instance.new("Frame")
Navbar.Size = UDim2.new(1, 0, 0, 35)
Navbar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Navbar.BorderSizePixel = 0
Navbar.Parent = MainFrame

local navCorner = Instance.new("UICorner")
navCorner.CornerRadius = UDim.new(0, 15)
navCorner.Parent = Navbar

local navBlock = Instance.new("Frame")
navBlock.Size = UDim2.new(1, 0, 0, 15)
navBlock.Position = UDim2.new(0, 0, 1, -15)
navBlock.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
navBlock.BorderSizePixel = 0
navBlock.Parent = Navbar

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -80, 1, 0)
TitleLabel.Position = UDim2.new(0, 10, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "‚ö° X-V3N0M"
TitleLabel.Font = Enum.Font.GothamBlack
TitleLabel.TextSize = 14
TitleLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = Navbar

local MinimizeBtn = Instance.new("TextButton")
MinimizeBtn.Size = UDim2.new(0, 28, 0, 28)
MinimizeBtn.Position = UDim2.new(1, -60, 0.5, -14)
MinimizeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MinimizeBtn.Text = "‚îÅ"
MinimizeBtn.Font = Enum.Font.GothamBold
MinimizeBtn.TextSize = 14
MinimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeBtn.Parent = Navbar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 6)
minimizeCorner.Parent = MinimizeBtn

local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 28, 0, 28)
CloseBtn.Position = UDim2.new(1, -30, 0.5, -14)
CloseBtn.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
CloseBtn.Text = "‚úï"
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 14
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.Parent = Navbar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = CloseBtn

-- Container
local Container = Instance.new("Frame")
Container.Size = UDim2.new(1, -10, 1, -45)
Container.Position = UDim2.new(0, 5, 0, 40)
Container.BackgroundTransparency = 1
Container.Parent = MainFrame

-- Profile Frame (LEFT - COMPACT)
local ProfileFrame = Instance.new("Frame")
ProfileFrame.Size = UDim2.new(0, 110, 1, 0)
ProfileFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ProfileFrame.BackgroundTransparency = 0.3
ProfileFrame.Parent = Container

local profileCorner = Instance.new("UICorner")
profileCorner.CornerRadius = UDim.new(0, 10)
profileCorner.Parent = ProfileFrame

local profileStroke = Instance.new("UIStroke")
profileStroke.Color = Color3.fromRGB(255, 215, 0)
profileStroke.Thickness = 1
profileStroke.Transparency = 0.5
profileStroke.Parent = ProfileFrame

local ProfilePicture = Instance.new("ImageLabel")
ProfilePicture.Size = UDim2.new(0, 70, 0, 70)
ProfilePicture.Position = UDim2.new(0.5, -35, 0, 10)
ProfilePicture.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ProfilePicture.BorderSizePixel = 0
ProfilePicture.Parent = ProfileFrame

local pictureCorner = Instance.new("UICorner")
pictureCorner.CornerRadius = UDim.new(0, 35)
pictureCorner.Parent = ProfilePicture

local pictureStroke = Instance.new("UIStroke")
pictureStroke.Color = Color3.fromRGB(255, 215, 0)
pictureStroke.Thickness = 2
pictureStroke.Parent = ProfilePicture

-- Load Avatar
local userId = Player.UserId
local function loadAvatar()
    local success, result = pcall(function()
        return game:GetService("Players"):GetUserThumbnailAsync(userId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size420x420)
    end)
    if success and result then
        ProfilePicture.Image = result
    end
end
task.spawn(loadAvatar)

local UsernameLabel = Instance.new("TextLabel")
UsernameLabel.Size = UDim2.new(1, -10, 0, 20)
UsernameLabel.Position = UDim2.new(0, 5, 0, 85)
UsernameLabel.BackgroundTransparency = 1
UsernameLabel.Text = "@" .. Player.Name
UsernameLabel.Font = Enum.Font.GothamBold
UsernameLabel.TextSize = 10
UsernameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
UsernameLabel.TextScaled = true
UsernameLabel.Parent = ProfileFrame

-- Divider
local Divider = Instance.new("Frame")
Divider.Size = UDim2.new(0, 2, 1, 0)
Divider.Position = UDim2.new(0, 115, 0, 0)
Divider.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
Divider.BackgroundTransparency = 0.5
Divider.BorderSizePixel = 0
Divider.Parent = Container

-- Content Frame (RIGHT)
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -125, 1, 0)
ContentFrame.Position = UDim2.new(0, 120, 0, 0)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = Container

-- Mini Icon
local MiniFrame = Instance.new("ImageButton")
MiniFrame.Size = UDim2.new(0, 50, 0, 50)
MiniFrame.Position = UDim2.new(0, 10, 0, 10)
MiniFrame.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
MiniFrame.BackgroundTransparency = 0.1
MiniFrame.BorderSizePixel = 0
MiniFrame.Active = true
MiniFrame.Draggable = true
MiniFrame.Visible = false
MiniFrame.Image = "rbxassetid://110225912398772"
MiniFrame.Parent = ScreenGui

local iconCorner = Instance.new("UICorner")
iconCorner.CornerRadius = UDim.new(0, 25)
iconCorner.Parent = MiniFrame

local iconStroke = Instance.new("UIStroke")
iconStroke.Color = Color3.fromRGB(255, 215, 0)
iconStroke.Thickness = 2
iconStroke.Parent = MiniFrame

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

MinimizeBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    MiniFrame.Visible = true
end)

MiniFrame.MouseButton1Click:Connect(function()
    MiniFrame.Visible = false
    MainFrame.Visible = true
end)

local function ShowNotification(text, color)
    color = color or Color3.fromRGB(255, 215, 0)
    
    local NotifFrame = Instance.new("Frame")
    NotifFrame.Size = UDim2.new(0, 280, 0, 55)
    NotifFrame.Position = UDim2.new(0.5, -140, 0, -70)
    NotifFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    NotifFrame.BorderSizePixel = 0
    NotifFrame.ZIndex = 100
    NotifFrame.Parent = ScreenGui
    
    local NotifCorner = Instance.new("UICorner")
    NotifCorner.CornerRadius = UDim.new(0, 12)
    NotifCorner.Parent = NotifFrame
    
    local NotifStroke = Instance.new("UIStroke")
    NotifStroke.Color = color
    NotifStroke.Thickness = 2
    NotifStroke.Parent = NotifFrame
    
    local NotifText = Instance.new("TextLabel")
    NotifText.Size = UDim2.new(1, -20, 1, -10)
    NotifText.Position = UDim2.new(0, 10, 0, 5)
    NotifText.BackgroundTransparency = 1
    NotifText.Text = text
    NotifText.TextColor3 = Color3.fromRGB(255, 255, 255)
    NotifText.TextSize = 11
    NotifText.Font = Enum.Font.GothamBold
    NotifText.TextWrapped = true
    NotifText.Parent = NotifFrame
    
    NotifFrame:TweenPosition(UDim2.new(0.5, -140, 0, 20), "Out", "Back", 0.4, true)
    task.wait(2.5)
    NotifFrame:TweenPosition(UDim2.new(0.5, -140, 0, -70), "In", "Back", 0.3, true)
    task.wait(0.3)
    NotifFrame:Destroy()
end

-- Category Data Storage
local categoryStates = {}
local featureStates = {}

-- Create Category Button (Header yang bisa diklik)
local function createCategory(icon, name, order)
    local catFrame = Instance.new("Frame")
    catFrame.Size = UDim2.new(1, -10, 0, 35)
    catFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    catFrame.BackgroundTransparency = 0.2
    catFrame.LayoutOrder = order
    catFrame.Parent = ContentFrame:FindFirstChild("ScrollFrame")
    
    local catCorner = Instance.new("UICorner")
    catCorner.CornerRadius = UDim.new(0, 8)
    catCorner.Parent = catFrame
    
    local catStroke = Instance.new("UIStroke")
    catStroke.Color = Color3.fromRGB(255, 215, 0)
    catStroke.Thickness = 1.5
    catStroke.Transparency = 0.3
    catStroke.Parent = catFrame
    
    local catButton = Instance.new("TextButton")
    catButton.Size = UDim2.new(1, 0, 1, 0)
    catButton.BackgroundTransparency = 1
    catButton.Text = ""
    catButton.Parent = catFrame
    
    local catLabel = Instance.new("TextLabel")
    catLabel.Size = UDim2.new(1, -60, 1, 0)
    catLabel.Position = UDim2.new(0, 10, 0, 0)
    catLabel.BackgroundTransparency = 1
    catLabel.Text = icon .. "  " .. name
    catLabel.Font = Enum.Font.GothamBlack
    catLabel.TextSize = 13
    catLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
    catLabel.TextXAlignment = Enum.TextXAlignment.Left
    catLabel.Parent = catFrame
    
    local arrow = Instance.new("TextLabel")
    arrow.Size = UDim2.new(0, 30, 1, 0)
    arrow.Position = UDim2.new(1, -35, 0, 0)
    arrow.BackgroundTransparency = 1
    arrow.Text = "‚ñº"
    arrow.Font = Enum.Font.GothamBold
    arrow.TextSize = 12
    arrow.TextColor3 = Color3.fromRGB(255, 215, 0)
    arrow.Parent = catFrame
    
    -- Container untuk features
    local featContainer = Instance.new("Frame")
    featContainer.Name = name .. "Container"
    featContainer.Size = UDim2.new(1, -10, 0, 0)
    featContainer.BackgroundTransparency = 1
    featContainer.LayoutOrder = order + 0.5
    featContainer.ClipsDescendants = true
    featContainer.Parent = ContentFrame:FindFirstChild("ScrollFrame")
    
    local featLayout = Instance.new("UIListLayout")
    featLayout.Padding = UDim.new(0, 5)
    featLayout.SortOrder = Enum.SortOrder.LayoutOrder
    featLayout.Parent = featContainer
    
    categoryStates[name] = {
        expanded = false,
        container = featContainer,
        arrow = arrow,
        frame = catFrame
    }
    
    catButton.MouseButton1Click:Connect(function()
        local state = categoryStates[name]
        state.expanded = not state.expanded
        
        if state.expanded then
            arrow.Text = "‚ñ≤"
            local targetHeight = featLayout.AbsoluteContentSize.Y + 5
            TweenService:Create(featContainer, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                Size = UDim2.new(1, -10, 0, targetHeight)
            }):Play()
            TweenService:Create(catStroke, TweenInfo.new(0.2), {
                Color = Color3.fromRGB(255, 240, 0),
                Transparency = 0
            }):Play()
        else
            arrow.Text = "‚ñº"
            TweenService:Create(featContainer, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                Size = UDim2.new(1, -10, 0, 0)
            }):Play()
            TweenService:Create(catStroke, TweenInfo.new(0.2), {
                Color = Color3.fromRGB(255, 215, 0),
                Transparency = 0.3
            }):Play()
        end
    end)
    
    return featContainer
end

-- Create Feature Toggle (dengan arrow buttons)
local function createFeature(icon, name, parentContainer, callback)
    local featFrame = Instance.new("Frame")
    featFrame.Size = UDim2.new(1, 0, 0, 32)
    featFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    featFrame.BackgroundTransparency = 0.3
    featFrame.Parent = parentContainer
    
    local featCorner = Instance.new("UICorner")
    featCorner.CornerRadius = UDim.new(0, 6)
    featCorner.Parent = featFrame
    
    local featStroke = Instance.new("UIStroke")
    featStroke.Color = Color3.fromRGB(255, 215, 0)
    featStroke.Thickness = 1
    featStroke.Transparency = 0.6
    featStroke.Parent = featFrame
    
    local featLabel = Instance.new("TextLabel")
    featLabel.Size = UDim2.new(1, -70, 1, 0)
    featLabel.Position = UDim2.new(0, 8, 0, 0)
    featLabel.BackgroundTransparency = 1
    featLabel.Text = icon .. " " .. name
    featLabel.Font = Enum.Font.GothamBold
    featLabel.TextSize = 11
    featLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    featLabel.TextXAlignment = Enum.TextXAlignment.Left
    featLabel.Parent = featFrame
    
    -- Toggle Button (Arrow style)
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0, 55, 0, 24)
    toggleBtn.Position = UDim2.new(1, -60, 0.5, -12)
    toggleBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    toggleBtn.BorderSizePixel = 0
    toggleBtn.Text = ""
    toggleBtn.Parent = featFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 12)
    toggleCorner.Parent = toggleBtn
    
    local toggleStroke = Instance.new("UIStroke")
    toggleStroke.Color = Color3.fromRGB(255, 215, 0)
    toggleStroke.Thickness = 1.5
    toggleStroke.Transparency = 0.5
    toggleStroke.Parent = toggleBtn
    
    -- Circle Indicator
    local circle = Instance.new("Frame")
    circle.Size = UDim2.new(0, 18, 0, 18)
    circle.Position = UDim2.new(0, 3, 0.5, -9)
    circle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    circle.Parent = toggleBtn
    
    local circleCorner = Instance.new("UICorner")
    circleCorner.CornerRadius = UDim.new(1, 0)
    circleCorner.Parent = circle
    
    featureStates[name] = false
    
    toggleBtn.MouseButton1Click:Connect(function()
        featureStates[name] = not featureStates[name]
        local active = featureStates[name]
        
        if active then
            TweenService:Create(circle, TweenInfo.new(0.2), {
                Position = UDim2.new(1, -21, 0.5, -9),
                BackgroundColor3 = Color3.fromRGB(255, 215, 0)
            }):Play()
            TweenService:Create(toggleBtn, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(50, 40, 0)
            }):Play()
            TweenService:Create(featStroke, TweenInfo.new(0.2), {
                Color = Color3.fromRGB(255, 240, 0),
                Transparency = 0
            }):Play()
        else
            TweenService:Create(circle, TweenInfo.new(0.2), {
                Position = UDim2.new(0, 3, 0.5, -9),
                BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            }):Play()
            TweenService:Create(toggleBtn, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            }):Play()
            TweenService:Create(featStroke, TweenInfo.new(0.2), {
                Color = Color3.fromRGB(255, 215, 0),
                Transparency = 0.6
            }):Play()
        end
        
        callback(active)
    end)
    
    return featFrame
end

-- ScrollFrame Setup
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, 0, 1, 0)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.ScrollBarThickness = 4
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(255, 215, 0)
ScrollFrame.ScrollBarImageTransparency = 0.3
ScrollFrame.BorderSizePixel = 0
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.Parent = ContentFrame

local ListLayout = Instance.new("UIListLayout")
ListLayout.Padding = UDim.new(0, 8)
ListLayout.SortOrder = Enum.SortOrder.LayoutOrder
ListLayout.Parent = ScrollFrame

ListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ListLayout.AbsoluteContentSize.Y + 10)
    
    -- Update container sizes when content changes
    for _, state in pairs(categoryStates) do
        if state.expanded then
            local layout = state.container:FindFirstChildOfClass("UIListLayout")
            if layout then
                state.container.Size = UDim2.new(1, -10, 0, layout.AbsoluteContentSize.Y + 5)
            end
        end
    end
end)

-- Create Categories
local MovementCat = createCategory("üèÉ", "Movement", 1)
local CombatCat = createCategory("‚öîÔ∏è", "Combat", 2)
local VisualCat = createCategory("üëÅÔ∏è", "Visual", 3)
local WorldCat = createCategory("üåç", "World", 4)
local UtilityCat = createCategory("üõ†Ô∏è", "Utility", 5)

-- ========== MOVEMENT FEATURES ==========
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

-- AIRWALK
local AirwalkActive = false
local AirWPart = nil

createFeature("üö∂", "Airwalk", MovementCat, function(active)
    AirwalkActive = active
    
    if active then
        local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local root = character:WaitForChild("HumanoidRootPart")
        
        AirWPart = Instance.new("Part", Workspace)
        AirWPart.Size = Vector3.new(7, 1, 3)
        AirWPart.Anchored = true
        AirWPart.Transparency = 1
        AirWPart.CanCollide = true
        AirWPart.Name = "Airwalk"
        
        local baseY = root.Position.Y - (root.Size.Y/2 + 0.5)
        AirWPart.Position = Vector3.new(root.Position.X, baseY, root.Position.Z)
        
        task.spawn(function()
            while AirwalkActive and AirWPart do
                if root and root.Parent then
                    AirWPart.Position = Vector3.new(root.Position.X, AirWPart.Position.Y, root.Position.Z)
                end
                task.wait(0.05)
            end
        end)
        
        ShowNotification("üö∂ Airwalk: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if AirWPart then
            AirWPart:Destroy()
            AirWPart = nil
        end
        ShowNotification("üö∂ Airwalk: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- SPEED
local speedOn = false
local selendangPart = nil

createFeature("‚ö°", "Speed", MovementCat, function(active)
    speedOn = active
    local char = Player.Character or Player.CharacterAdded:Wait()
    local hum = char:FindFirstChild("Humanoid")
    
    if active then
        if hum then hum.WalkSpeed = 50 end
        ShowNotification("‚ö° Speed: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if hum then hum.WalkSpeed = 16 end
        ShowNotification("‚ö° Speed: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- INFINITE JUMP
local infiniteJumpEnabled = false

createFeature("ü¶ò", "Infinite Jump", MovementCat, function(active)
    infiniteJumpEnabled = active
    
    if active then
        ShowNotification("ü¶ò Infinite Jump: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        ShowNotification("ü¶ò Infinite Jump: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

UserInputService.JumpRequest:Connect(function()
    if infiniteJumpEnabled then
        local char = Player.Character
        if char then
            local humanoid = char:FindFirstChild("Humanoid")
            local root = char:FindFirstChild("HumanoidRootPart")
            if humanoid and root then
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                local goalVelocity = Vector3.new(root.Velocity.X, 25, root.Velocity.Z)
                TweenService:Create(root, TweenInfo.new(0.15, Enum.EasingStyle.Quad), {Velocity = goalVelocity}):Play()
            end
        end
    end
end)

-- NOCLIP
local noclipActive = false
local noclipConnection = nil

createFeature("üëª", "Noclip", MovementCat, function(active)
    noclipActive = active
    
    if active then
        noclipConnection = RunService.Stepped:Connect(function()
            local char = Player.Character
            if char then
                for _, obj in ipairs(char:GetDescendants()) do
                    if obj:IsA("BasePart") then
                        obj.CanCollide = false
                    end
                end
            end
        end)
        ShowNotification("üëª Noclip: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        
        local char = Player.Character
        if char then
            for _, obj in ipairs(char:GetDescendants()) do
                if obj:IsA("BasePart") then
                    obj.CanCollide = true
                end
            end
        end
        ShowNotification("üëª Noclip: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- FLY
local flying = false

createFeature("üïäÔ∏è", "Fly", MovementCat, function(active)
    flying = active
    
    local char = Player.Character
    if not char then return end
    
    local humanoid = char:FindFirstChild("Humanoid")
    local root = char:FindFirstChild("HumanoidRootPart")
    
    if active then
        if humanoid then humanoid.PlatformStand = true end
        Workspace.Gravity = 0
        ShowNotification("üïäÔ∏è Fly: AKTIF\nW/A/S/D untuk terbang", Color3.fromRGB(255, 215, 0))
    else
        if humanoid then humanoid.PlatformStand = false end
        Workspace.Gravity = 196.2
        ShowNotification("üïäÔ∏è Fly: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- Fly Control
local flySpeed = 2
local pressed = {Up=false, Down=false, Left=false, Right=false}

UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe or not flying then return end
    if input.KeyCode == Enum.KeyCode.W then pressed.Up = true end
    if input.KeyCode == Enum.KeyCode.S then pressed.Down = true end
    if input.KeyCode == Enum.KeyCode.A then pressed.Left = true end
    if input.KeyCode == Enum.KeyCode.D then pressed.Right = true end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.W then pressed.Up = false end
    if input.KeyCode == Enum.KeyCode.S then pressed.Down = false end
    if input.KeyCode == Enum.KeyCode.A then pressed.Left = false end
    if input.KeyCode == Enum.KeyCode.D then pressed.Right = false end
end)

RunService.Heartbeat:Connect(function(dt)
    if not flying then return end
    
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    root.AssemblyLinearVelocity = Vector3.zero
    root.AssemblyAngularVelocity = Vector3.zero
    
    local cam = workspace.CurrentCamera
    local lookVec = cam.CFrame.LookVector
    local rightVec = cam.CFrame.RightVector
    local dir = Vector3.zero
    
    if pressed.Up then dir = dir + lookVec end
    if pressed.Down then dir = dir - lookVec end
    if pressed.Left then dir = dir - rightVec end
    if pressed.Right then dir = dir + rightVec end
    
    if dir.Magnitude > 0 then
        local newPos = root.Position + dir.Unit * flySpeed * dt * 60
        root.CFrame = CFrame.new(newPos, newPos + lookVec)
    end
end)

-- FREESTYLE (Reverse Lock)
local isReverseMode = false

createFeature("üîÑ", "Freestyle", MovementCat, function(active)
    isReverseMode = active
    
    local char = Player.Character
    if not char then return end
    
    local hum = char:FindFirstChild("Humanoid")
    
    if active then
        if hum then hum.AutoRotate = false end
        ShowNotification("üîÑ Freestyle: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if hum then hum.AutoRotate = true end
        ShowNotification("üîÑ Freestyle: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- ========== COMBAT FEATURES ==========

-- FLING
local hiddenfling = false

createFeature("üí•", "Fling", CombatCat, function(active)
    hiddenfling = active
    
    if active then
        task.spawn(function()
            while hiddenfling do
                RunService.Heartbeat:Wait()
                local char = LocalPlayer.Character
                if char then
                    local hrp = char:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        local vel = hrp.Velocity
                        hrp.Velocity = vel * 99999 + Vector3.new(0, 99999, 0)
                        RunService.RenderStepped:Wait()
                        hrp.Velocity = vel
                    end
                end
            end
        end)
        ShowNotification("üí• Fling: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        ShowNotification("üí• Fling: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- HITBOX EXPANDER
local hitboxActive = false
local hitboxConnections = {}
local originalSizes = {}

createFeature("üíÄ", "Hitbox", CombatCat, function(active)
    hitboxActive = active
    
    if active then
        local HitboxSize = 20
        
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= Player and plr.Character then
                local head = plr.Character:FindFirstChild("Head")
                if head and head:IsA("BasePart") then
                    if not originalSizes[head] then
                        originalSizes[head] = {Size = head.Size, Transparency = head.Transparency}
                    end
                    head.Size = Vector3.new(HitboxSize, HitboxSize, HitboxSize)
                    head.Transparency = 0.8
                    head.CanCollide = false
                    head.Massless = true
                end
            end
        end
        
        local updateLoop = RunService.Heartbeat:Connect(function()
            if hitboxActive then
                for _, plr in pairs(Players:GetPlayers()) do
                    if plr ~= Player and plr.Character then
                        local head = plr.Character:FindFirstChild("Head")
                        if head then
                            head.Size = Vector3.new(HitboxSize, HitboxSize, HitboxSize)
                        end
                    end
                end
            end
        end)
        table.insert(hitboxConnections, updateLoop)
        
        ShowNotification("üíÄ Hitbox: AKTIF\n‚ö†Ô∏è BAN RISK!", Color3.fromRGB(255, 0, 0))
    else
        for _, conn in pairs(hitboxConnections) do
            conn:Disconnect()
        end
        hitboxConnections = {}
        
        for head, state in pairs(originalSizes) do
            if head and head.Parent then
                head.Size = state.Size
                head.Transparency = state.Transparency
                head.CanCollide = true
                head.Massless = false
            end
        end
        originalSizes = {}
        
        ShowNotification("üíÄ Hitbox: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- ========== VISUAL FEATURES ==========

-- LAMPU
local lampOn = false
local headLamp = nil

createFeature("üí°", "Lampu", VisualCat, function(active)
    lampOn = active
    
    local char = Player.Character
    if not char then return end
    
    if active then
        local head = char:FindFirstChild("Head")
        if head and not char:FindFirstChild("HeadLamp") then
            headLamp = Instance.new("Part")
            headLamp.Name = "HeadLamp"
            headLamp.Size = Vector3.new(0.5, 0.5, 0.5)
            headLamp.Shape = Enum.PartType.Ball
            headLamp.Color = Color3.fromRGB(255, 215, 0)
            headLamp.Material = Enum.Material.Neon
            headLamp.Anchored = false
            headLamp.CanCollide = false
            headLamp.CFrame = head.CFrame * CFrame.new(0, 0.8, 0)
            headLamp.Parent = char
            
            local weld = Instance.new("WeldConstraint")
            weld.Part0 = head
            weld.Part1 = headLamp
            weld.Parent = headLamp
            
            local light = Instance.new("PointLight")
            light.Color = Color3.fromRGB(255, 215, 0)
            light.Range = 100
            light.Brightness = 2
            light.Parent = headLamp
        end
        ShowNotification("üí° Lampu: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if headLamp and headLamp.Parent then
            headLamp:Destroy()
            headLamp = nil
        end
        ShowNotification("üí° Lampu: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

Player.CharacterAdded:Connect(function(char)
    if lampOn then
        task.wait(1)
        local head = char:FindFirstChild("Head")
        if head then
            headLamp = Instance.new("Part")
            headLamp.Name = "HeadLamp"
            headLamp.Size = Vector3.new(0.5, 0.5, 0.5)
            headLamp.Shape = Enum.PartType.Ball
            headLamp.Color = Color3.fromRGB(255, 215, 0)
            headLamp.Material = Enum.Material.Neon
            headLamp.Anchored = false
            headLamp.CanCollide = false
            headLamp.CFrame = head.CFrame * CFrame.new(0, 0.8, 0)
            headLamp.Parent = char
            
            local weld = Instance.new("WeldConstraint")
            weld.Part0 = head
            weld.Part1 = headLamp
            weld.Parent = headLamp
            
            local light = Instance.new("PointLight")
            light.Color = Color3.fromRGB(255, 215, 0)
            light.Range = 100
            light.Brightness = 2
            light.Parent = headLamp
        end
    end
end)

local unanchorActive = false
local unanchorFolder = nil
local unanchorAttachment = nil
local unanchorConnection = nil

createFeature("üîì", "Unanchor", WorldCat, function(active)
    unanchorActive = active
    
    if active then
        unanchorFolder = Instance.new("Folder", Workspace)
        local part = Instance.new("Part", unanchorFolder)
        part.Anchored = true
        part.CanCollide = false
        part.Transparency = 1
        unanchorAttachment = Instance.new("Attachment", part)
        
        task.spawn(function()
            settings().Physics.AllowSleep = false
            while unanchorActive and task.wait() do
                for _, pl in next, Players:GetPlayers() do
                    if pl ~= Player then
                        pl.MaximumSimulationRadius = 0
                        pcall(function()
                            sethiddenproperty(pl, "SimulationRadius", 0)
                        end)
                    end
                end
                Player.MaximumSimulationRadius = math.pow(math.huge, math.huge)
                pcall(function()
                    setsimulationradius(math.huge)
                end)
            end
        end)
        
        unanchorConnection = RunService.Stepped:Connect(function()
            if not unanchorActive then return end
            
            local char = Player.Character
            if not char then return end
            local root = char:FindFirstChild("HumanoidRootPart")
            if not root then return end
            
            for _, v in pairs(Workspace:GetDescendants()) do
                if v:IsA("BasePart") and not v.Anchored and not v:IsDescendantOf(char) then
                    local dist = (v.Position - root.Position).Magnitude
                    if dist <= 500 then
                        v.CanCollide = false
                        
                        if not v:FindFirstChild("Torque") then
                            local torque = Instance.new("Torque", v)
                            torque.Torque = Vector3.new(100000, 100000, 100000)
                            local align = Instance.new("AlignPosition", v)
                            local at2 = Instance.new("Attachment", v)
                            torque.Attachment0 = at2
                            align.MaxForce = 9e15
                            align.MaxVelocity = math.huge
                            align.Responsiveness = 200
                            align.Attachment0 = at2
                            if unanchorAttachment then
                                align.Attachment1 = unanchorAttachment
                            end
                        end
                    end
                end
            end
        end)
        
        ShowNotification("üîì Unanchor: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if unanchorConnection then
            unanchorConnection:Disconnect()
            unanchorConnection = nil
        end
        if unanchorFolder then
            unanchorFolder:Destroy()
            unanchorFolder = nil
        end
        unanchorAttachment = nil
        
        ShowNotification("üîì Unanchor: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- BRING PART
local bringPartActive = false
local bringFolder = nil
local bringAttachment = nil
local bringConnection = nil

createFeature("üß≤", "BringPart", WorldCat, function(active)
    bringPartActive = active
    
    if active then
        bringFolder = Instance.new("Folder", Workspace)
        bringFolder.Name = "BringPartFolder"
        local TargetPart = Instance.new("Part", bringFolder)
        TargetPart.Anchored = true
        TargetPart.CanCollide = false
        TargetPart.Transparency = 1
        bringAttachment = Instance.new("Attachment", TargetPart)
        
        local function ForcePart(v)
            if v:IsA("BasePart") and not v.Anchored and not v.Parent:FindFirstChildOfClass("Humanoid") then
                v.CanCollide = false
                
                if not v:FindFirstChild("AlignPosition") then
                    local Torque = Instance.new("Torque", v)
                    Torque.Torque = Vector3.new(100000, 100000, 100000)
                    local AlignPosition = Instance.new("AlignPosition", v)
                    local Attachment2 = Instance.new("Attachment", v)
                    Torque.Attachment0 = Attachment2
                    AlignPosition.MaxForce = math.huge
                    AlignPosition.MaxVelocity = math.huge
                    AlignPosition.Responsiveness = 200
                    AlignPosition.Attachment0 = Attachment2
                    AlignPosition.Attachment1 = bringAttachment
                end
            end
        end
        
        for _, v in ipairs(Workspace:GetDescendants()) do
            ForcePart(v)
        end
        
        bringConnection = Workspace.DescendantAdded:Connect(function(v)
            if bringPartActive and v:IsA("BasePart") then
                ForcePart(v)
            end
        end)
        
        task.spawn(function()
            while bringPartActive and RunService.RenderStepped:Wait() do
                local char = Player.Character
                if char then
                    local head = char:FindFirstChild("Head")
                    if head and bringAttachment then
                        bringAttachment.WorldCFrame = head.CFrame * CFrame.new(0, 10, 0)
                    end
                end
            end
        end)
        
        ShowNotification("üß≤ BringPart: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        if bringConnection then
            bringConnection:Disconnect()
            bringConnection = nil
        end
        if bringFolder then
            bringFolder:Destroy()
            bringFolder = nil
        end
        bringAttachment = nil
        
        ShowNotification("üß≤ BringPart: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- ========== UTILITY FEATURES ==========

-- ANTI LAG
local antiLagActive = false
local antiLagOriginal = {}

createFeature("üõ°Ô∏è", "Anti Lag", UtilityCat, function(active)
    antiLagActive = active
    
    if active then
        local l = game.Lighting
        local t = Workspace.Terrain
        
        antiLagOriginal[t] = {
            WaterWaveSize = t.WaterWaveSize,
            WaterWaveSpeed = t.WaterWaveSpeed,
            WaterReflectance = t.WaterReflectance,
            WaterTransparency = t.WaterTransparency
        }
        
        t.WaterWaveSize = 0
        t.WaterWaveSpeed = 0
        t.WaterReflectance = 0
        t.WaterTransparency = 0
        l.GlobalShadows = false
        l.FogEnd = 9e9
        l.Brightness = 0
        settings().Rendering.QualityLevel = "Level01"
        
        for _, v in pairs(game:GetDescendants()) do
            if v:IsA("Part") or v:IsA("Union") or v:IsA("MeshPart") then
                v.Material = "Plastic"
                v.Reflectance = 0
            elseif v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                v.Enabled = false
            elseif v:IsA("Fire") or v:IsA("Smoke") or v:IsA("Sparkles") then
                v.Enabled = false
            end
        end
        
        ShowNotification("üõ°Ô∏è Anti Lag: AKTIF", Color3.fromRGB(255, 215, 0))
    else
        for obj, state in pairs(antiLagOriginal) do
            if obj and obj.Parent then
                for prop, val in pairs(state) do
                    pcall(function()
                        obj[prop] = val
                    end)
                end
            end
        end
        antiLagOriginal = {}
        
        ShowNotification("üõ°Ô∏è Anti Lag: NONAKTIF", Color3.fromRGB(150, 150, 150))
    end
end)

-- EXTERNAL SCRIPTS
createFeature("üëÅÔ∏è", "Spectator", UtilityCat, function(active)
    if active then
        pcall(function()
            loadstring(game:HttpGet("https://airdropwota.io/t2.txt"))()
        end)
        ShowNotification("üëÅÔ∏è Spectator Loaded!", Color3.fromRGB(255, 215, 0))
        featureStates["Spectator"] = false
    end
end)

createFeature("üé•", "Record", UtilityCat, function(active)
    if active then
        pcall(function()
            loadstring(game:HttpGet("https://airdropwota.io/r1.txt"))()
        end)
        ShowNotification("üé• Record Loaded!", Color3.fromRGB(255, 215, 0))
        featureStates["Record"] = false
    end
end)

createFeature("üï≥Ô∏è", "Teleport", UtilityCat, function(active)
    if active then
        pcall(function()
            loadstring(game:HttpGet("https://airdropwota.io/t4.txt"))()
        end)
        ShowNotification("üï≥Ô∏è Teleport Loaded!", Color3.fromRGB(255, 215, 0))
        featureStates["Teleport"] = false
    end
end)

createFeature("üíÉ", "Animasi", UtilityCat, function(active)
    if active then
        pcall(function()
            loadstring(game:HttpGet("https://airdropwota.io/A1.txt"))()
        end)
        ShowNotification("üíÉ Animasi Loaded!", Color3.fromRGB(255, 215, 0))
        featureStates["Animasi"] = false
    end
end)

createFeature("üé≠", "Avatar", UtilityCat, function(active)
    if active then
        pcall(function()
            loadstring(game:HttpGet("https://airdropwota.io/c2.txt"))()
        end)
        ShowNotification("üé≠ Avatar Loaded!", Color3.fromRGB(255, 215, 0))
        featureStates["Avatar"] = false
    end
end)

createFeature("üé£", "Fish Auto", UtilityCat, function(active)
    if active then
        pcall(function()
            loadstring(game:HttpGet("https://airdropwota.io/m3.txt"))()
        end)
        ShowNotification("üé£ Fish Auto Loaded!", Color3.fromRGB(255, 215, 0))
        featureStates["Fish Auto"] = false
    end
end)

-- ========== CHARACTER RESPAWN HANDLER ==========
Player.CharacterAdded:Connect(function(char)
    -- Reset semua toggle states
    for name, state in pairs(featureStates) do
        if state then
            featureStates[name] = false
        end
    end
    
    -- Reset variables
    AirwalkActive = false
    if AirWPart then AirWPart:Destroy() AirWPart = nil end
    
    speedOn = false
    infiniteJumpEnabled = false
    noclipActive = false
    flying = false
    hiddenfling = false
    hitboxActive = false
    lampOn = false
    unanchorActive = false
    bringPartActive = false
    antiLagActive = false
    isReverseMode = false
    
    -- Disconnect connections
    if noclipConnection then noclipConnection:Disconnect() noclipConnection = nil end
    if unanchorConnection then unanchorConnection:Disconnect() unanchorConnection = nil end
    if bringConnection then bringConnection:Disconnect() bringConnection = nil end
    
    -- Reset workspace
    Workspace.Gravity = 196.2
    
    ShowNotification("üîÑ Character Respawned\nAll features reset!", Color3.fromRGB(255, 215, 0))
end)

-- ========== STARTUP SEQUENCE ==========
task.wait(0.5)
ShowNotification("‚ö° X-V3N0M V1.0 LOADED!\nüé® Compact Category Edition\nüìÅ 5 Categories | 19+ Features", Color3.fromRGB(255, 215, 0))

-- ========== CONSOLE LOG ==========
print("============================================")
print("‚ö° X-V3N0M CHEAT GUI V1.0")
print("============================================")
print("üé® STYLE: Compact Category System")
print("üìê SIZE: 480x320 (Smaller & Cleaner)")
print("üéØ THEME: Black-Gold (No Blue)")
print("============================================")
print("üìÇ CATEGORIES:")
print("   üèÉ Movement - 6 features")
print("   ‚öîÔ∏è Combat - 2 features")
print("   üëÅÔ∏è Visual - 1 feature")
print("   üåç World - 2 features")
print("   üõ†Ô∏è Utility - 8 features")
print("============================================")
print("‚ú® NEW FEATURES:")
print("   ‚Ä¢ Collapsible Categories")
print("   ‚Ä¢ Toggle Switches (Arrow Style)")
print("   ‚Ä¢ Compact Layout")
print("   ‚Ä¢ No Blue Colors (Gold Theme)")
print("   ‚Ä¢ Auto-Reset on Respawn")
print("============================================")
print("üéÆ CONTROLS:")
print("   ‚Ä¢ Click category to expand/collapse")
print("   ‚Ä¢ Toggle switches to enable/disable")
print("   ‚Ä¢ Drag GUI or icon to move")
print("   ‚Ä¢ Minimize button to hide GUI")
print("============================================")
print("‚úÖ GUI LOADED SUCCESSFULLY!")
print("============================================")
