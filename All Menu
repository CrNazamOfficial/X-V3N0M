
local NazamOfficial = "Nazam Official"

-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

-- Variables
local isDragging = false
local dragStart, mainStartPos, iconStartPos
local isMenuOpen = true
local aimEnabled = false
local aimMode = "Head"
local aimRange = 67
local aimSmoothness = 0.2
local teleportPoints = {}
local spectatingPlayer = nil
local isSpectating = false
local currentTarget = nil
local lastTargetTime = 0

-- Koordinat teleport default (5 slot)
for i = 1, 5 do
    teleportPoints[i] = Vector3.new(0, 0, 0)
end

-- UI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BN XITERZ"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Mini Icon
local MiniIcon = Instance.new("ImageButton")
MiniIcon.Size = UDim2.new(0, 50, 0, 50)
MiniIcon.Position = UDim2.new(0, 20, 0, 20)
MiniIcon.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MiniIcon.BackgroundTransparency = 0.2
MiniIcon.Image = "http://www.roblox.com/asset/?id=9651650571"  -- Fixed image ID format
MiniIcon.Visible = false
MiniIcon.ZIndex = 10
MiniIcon.Parent = ScreenGui

local MiniIconCorner = Instance.new("UICorner")
MiniIconCorner.CornerRadius = UDim.new(0, 12)
MiniIconCorner.Parent = MiniIcon

local MiniIconStroke = Instance.new("UIStroke")
MiniIconStroke.Color = Color3.fromRGB(100, 100, 120)
MiniIconStroke.Thickness = 2
MiniIconStroke.Parent = MiniIcon

-- Main Frame (16:9 ratio - 480x270)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 480, 0, 270)
MainFrame.Position = UDim2.new(0.5, -240, 0.5, -135)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
MainFrame.BackgroundTransparency = 0.05
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = Color3.fromRGB(50, 50, 60)
MainStroke.Thickness = 2
MainStroke.Parent = MainFrame

-- Background Image (FIXED - Using different image ID format)
local Background = Instance.new("ImageLabel")
Background.Size = UDim2.new(1, 0, 1, 0)
Background.BackgroundTransparency = 1
Background.Image = "http://www.roblox.com/asset/?id=1227055144"  -- Fixed image ID
Background.ImageTransparency = 0.2  -- Reduced transparency to be more visible
Background.ScaleType = Enum.ScaleType.Crop
Background.Parent = MainFrame

-- Header
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 40)
Header.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
Header.BackgroundTransparency = 0.3
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 16)
HeaderCorner.Parent = Header

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -50, 1, 0)
Title.Position = UDim2.new(0, 12, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Text = "BN XITERZ"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 28, 0, 28)
CloseButton.Position = UDim2.new(1, -34, 0, 6)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Text = "X"
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 13
CloseButton.ZIndex = 5
CloseButton.Parent = Header

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Area
local Content = Instance.new("Frame")
Content.Size = UDim2.new(1, -16, 1, -52)
Content.Position = UDim2.new(0, 8, 0, 46)
Content.BackgroundTransparency = 1
Content.Parent = MainFrame

-- Tab Buttons
local TabButtons = Instance.new("Frame")
TabButtons.Size = UDim2.new(1, 0, 0, 32)
TabButtons.BackgroundTransparency = 1
TabButtons.Parent = Content

local Tabs = {"Information", "Aim", "Teleport", "Spectate", "Buy"}
local CurrentTab = "Information"

-- Tab Contents
local TabContents = Instance.new("Frame")
TabContents.Size = UDim2.new(1, 0, 1, -38)
TabContents.Position = UDim2.new(0, 0, 0, 38)
TabContents.BackgroundTransparency = 1
TabContents.Parent = Content

-- Function to create modern toggle switch
local function createToggleSwitch(text, yPosition, defaultValue, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 32)
    frame.Position = UDim2.new(0, 0, 0, yPosition)
    frame.BackgroundTransparency = 1
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.6, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Text = text
    label.Font = Enum.Font.Gotham
    label.TextSize = 12
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame
    
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size = UDim2.new(0, 44, 0, 22)
    toggleFrame.Position = UDim2.new(1, -50, 0.5, -11)
    toggleFrame.BackgroundColor3 = defaultValue and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(80, 80, 80)
    toggleFrame.BorderSizePixel = 0
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(1, 0)
    toggleCorner.Parent = toggleFrame
    
    local toggleCircle = Instance.new("Frame")
    toggleCircle.Size = UDim2.new(0, 18, 0, 18)
    toggleCircle.Position = defaultValue and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)
    toggleCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    toggleCircle.BorderSizePixel = 0
    
    local circleCorner = Instance.new("UICorner")
    circleCorner.CornerRadius = UDim.new(1, 0)
    circleCorner.Parent = toggleCircle
    
    toggleCircle.Parent = toggleFrame
    toggleFrame.Parent = frame
    
    local isToggled = defaultValue
    
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(1, 0, 1, 0)
    toggleButton.BackgroundTransparency = 1
    toggleButton.Text = ""
    toggleButton.Parent = toggleFrame
    
    toggleButton.MouseButton1Click:Connect(function()
        isToggled = not isToggled
        
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        
        if isToggled then
            TweenService:Create(toggleFrame, tweenInfo, {BackgroundColor3 = Color3.fromRGB(0, 150, 0)}):Play()
            TweenService:Create(toggleCircle, tweenInfo, {Position = UDim2.new(1, -20, 0.5, -9)}):Play()
        else
            TweenService:Create(toggleFrame, tweenInfo, {BackgroundColor3 = Color3.fromRGB(80, 80, 80)}):Play()
            TweenService:Create(toggleCircle, tweenInfo, {Position = UDim2.new(0, 2, 0.5, -9)}):Play()
        end
        
        if callback then
            callback(isToggled)
        end
    end)
    
    return frame
end

-- Function to create slider
local function createSlider(text, yPosition, minValue, maxValue, defaultValue, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 50)
    frame.Position = UDim2.new(0, 0, 0, yPosition)
    frame.BackgroundTransparency = 1
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.7, 0, 0, 20)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Text = text
    label.Font = Enum.Font.Gotham
    label.TextSize = 12
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0.3, 0, 0, 20)
    valueLabel.Position = UDim2.new(0.7, 0, 0, 0)
    valueLabel.BackgroundTransparency = 1
    valueLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
    valueLabel.Text = tostring(defaultValue)
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextSize = 12
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = frame
    
    local sliderBack = Instance.new("Frame")
    sliderBack.Size = UDim2.new(1, 0, 0, 6)
    sliderBack.Position = UDim2.new(0, 0, 0, 28)
    sliderBack.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    sliderBack.BorderSizePixel = 0
    sliderBack.Parent = frame
    
    local sliderBackCorner = Instance.new("UICorner")
    sliderBackCorner.CornerRadius = UDim.new(1, 0)
    sliderBackCorner.Parent = sliderBack
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((defaultValue - minValue) / (maxValue - minValue), 0, 1, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBack
    
    local sliderFillCorner = Instance.new("UICorner")
    sliderFillCorner.CornerRadius = UDim.new(1, 0)
    sliderFillCorner.Parent = sliderFill
    
    local sliderButton = Instance.new("TextButton")
    sliderButton.Size = UDim2.new(1, 0, 1, 14)
    sliderButton.Position = UDim2.new(0, 0, 0, -7)
    sliderButton.BackgroundTransparency = 1
    sliderButton.Text = ""
    sliderButton.Parent = sliderBack
    
    local dragging = false
    
    sliderButton.MouseButton1Down:Connect(function()
        dragging = true
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local mousePos = UserInputService:GetMouseLocation().X
            local sliderPos = sliderBack.AbsolutePosition.X
            local sliderSize = sliderBack.AbsoluteSize.X
            
            local percent = math.clamp((mousePos - sliderPos) / sliderSize, 0, 1)
            local value = math.floor(minValue + (maxValue - minValue) * percent)
            
            sliderFill.Size = UDim2.new(percent, 0, 1, 0)
            valueLabel.Text = tostring(value)
            
            if callback then
                callback(value)
            end
        end
    end)
    
    return frame
end

-- END OF PART 1
-- Lanjutkan dengan PART 2

-- BN XITERZ - PART 2 OF 4

-- Function to create tab button
local function createTabButton(text, index)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.18, 0, 1, 0)
    button.Position = UDim2.new(0.18 * (index - 1) + 0.01, 0, 0, 0)
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    button.TextColor3 = Color3.fromRGB(200, 200, 200)
    button.Text = text
    button.Font = Enum.Font.Gotham
    button.TextSize = 11
    button.BorderSizePixel = 0
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    button.MouseEnter:Connect(function()
        if CurrentTab ~= text then
            button.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        end
    end)
    
    button.MouseLeave:Connect(function()
        if CurrentTab ~= text then
            button.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
        end
    end)
    
    button.Parent = TabButtons
    return button
end

-- Information Tab
local InformationTab = Instance.new("ScrollingFrame")
InformationTab.Size = UDim2.new(1, 0, 1, 0)
InformationTab.BackgroundTransparency = 1
InformationTab.ScrollBarThickness = 3
InformationTab.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
InformationTab.Visible = true
InformationTab.CanvasSize = UDim2.new(0, 0, 0, 280)
InformationTab.BorderSizePixel = 0
InformationTab.Parent = TabContents

local InfoText = Instance.new("TextLabel")
InfoText.Size = UDim2.new(1, -16, 0, 270)
InfoText.Position = UDim2.new(0, 8, 0, 5)
InfoText.BackgroundTransparency = 1
InfoText.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoText.Text = [[
BN XITERZ - ENHANCED VERSION
Version: 2.0
Developer: Nazam Official
Co-Developer: Birul

FEATURES:
‚Ä¢ Advanced Camera Aim System
‚Ä¢ Smooth Sticky Aim (Lengket)
‚Ä¢ Adjustable Range (50-500 studs)
‚Ä¢ Adjustable Smoothness
‚Ä¢ Target: Head atau Body
‚Ä¢ Teleport System (5 Locations)
‚Ä¢ Player Spectate
‚Ä¢ Smooth UI Design (16:9)

CARA PENGGUNAAN AIM:
1. Aktifkan "Enable Aim Assist"
2. Pilih Mode (HEAD/BODY)
3. Atur Range (jarak deteksi)
4. Atur Smoothness (kelengketan):
   - 0-10 = Sangat Lengket
   - 20-30 = Smooth Normal
   - 40-50 = Soft Aim
5. Aim otomatis mengikuti target!

Note: Aim bekerja dengan kamera
]]
InfoText.Font = Enum.Font.Gotham
InfoText.TextSize = 10
InfoText.TextWrapped = true
InfoText.TextXAlignment = Enum.TextXAlignment.Left
InfoText.TextYAlignment = Enum.TextYAlignment.Top
InfoText.Parent = InformationTab

-- Aim Tab
local AimTab = Instance.new("ScrollingFrame")
AimTab.Size = UDim2.new(1, 0, 1, 0)
AimTab.BackgroundTransparency = 1
AimTab.ScrollBarThickness = 3
AimTab.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
AimTab.Visible = false
AimTab.CanvasSize = UDim2.new(0, 0, 0, 240)
AimTab.BorderSizePixel = 0
AimTab.Parent = TabContents

local AimToggle = createToggleSwitch("Enable Aim Assist", 5, false, function(state)
    aimEnabled = state
    currentTarget = nil
    print("üéØ Aim Assist:", state and "ON" or "OFF")
end)
AimToggle.Parent = AimTab

-- Aim Mode Selection
local AimModeFrame = Instance.new("Frame")
AimModeFrame.Size = UDim2.new(1, 0, 0, 65)
AimModeFrame.Position = UDim2.new(0, 0, 0, 42)
AimModeFrame.BackgroundTransparency = 1
AimModeFrame.Parent = AimTab

local ModeLabel = Instance.new("TextLabel")
ModeLabel.Size = UDim2.new(1, 0, 0, 24)
ModeLabel.Position = UDim2.new(0, 0, 0, 0)
ModeLabel.BackgroundTransparency = 1
ModeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ModeLabel.Text = "Aim Mode:"
ModeLabel.Font = Enum.Font.Gotham
ModeLabel.TextSize = 12
ModeLabel.TextXAlignment = Enum.TextXAlignment.Left
ModeLabel.Parent = AimModeFrame

local modeButtons = {}

local function createModeButton(text, xPos, mode)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.45, -5, 0, 32)
    button.Position = UDim2.new(xPos, 0, 0, 28)
    button.BackgroundColor3 = aimMode == mode and Color3.fromRGB(0, 100, 200) or Color3.fromRGB(60, 60, 70)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Text = text
    button.Font = Enum.Font.GothamSemibold
    button.TextSize = 11
    button.BorderSizePixel = 0
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    button.MouseButton1Click:Connect(function()
        aimMode = mode
        for _, btn in pairs(modeButtons) do
            btn.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        end
        button.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
        currentTarget = nil
        print("üéØ Aim Mode:", mode)
    end)
    
    button.Parent = AimModeFrame
    table.insert(modeButtons, button)
    return button
end

createModeButton("HEAD", 0, "Head")
createModeButton("BODY", 0.5, "Body")

-- Range Slider
local RangeSlider = createSlider("Aim Range (studs):", 112, 50, 500, 100, function(value)
    aimRange = value
    print("üéØ Range:", value, "studs")
end)
RangeSlider.Parent = AimTab

-- Smoothness Slider
local SmoothnessSlider = createSlider("Smoothness (0-50):", 167, 0, 50, 20, function(value)
    aimSmoothness = value / 100
    print("üéØ Smoothness:", aimSmoothness)
end)
SmoothnessSlider.Parent = AimTab

-- IMPROVED AIM FUNCTIONS
local function getTargetPart(character)
    if aimMode == "Head" then
        return character:FindFirstChild("Head") or character:FindFirstChild("HumanoidRootPart")
    else
        return character:FindFirstChild("HumanoidRootPart")
    end
end

local function isPlayerVisible(targetPart)
    local camera = Workspace.CurrentCamera
    if not camera then return false end
    
    local ray = Ray.new(camera.CFrame.Position, (targetPart.Position - camera.CFrame.Position).Unit * aimRange)
    local hit, pos = Workspace:FindPartOnRayWithIgnoreList(ray, {LocalPlayer.Character})
    
    if hit and hit:IsDescendantOf(targetPart.Parent) then
        return true
    end
    
    return false
end

local function findNearestEnemy()
    local closestDistance = math.huge
    local targetPart = nil
    local camera = Workspace.CurrentCamera
    
    if not camera then return nil end
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local character = player.Character
            local humanoid = character:FindFirstChild("Humanoid")
            
            if humanoid and humanoid.Health > 0 then
                local part = getTargetPart(character)
                
                if part then
                    local distance = (part.Position - camera.CFrame.Position).Magnitude
                    
                    if distance <= aimRange and distance < closestDistance then
                        if isPlayerVisible(part) then
                            closestDistance = distance
                            targetPart = part
                        end
                    end
                end
            end
        end
    end
    
    return targetPart
end

local function smoothAimAt(targetPart)
    if not aimEnabled or not targetPart then 
        currentTarget = nil
        return 
    end
    
    local camera = Workspace.CurrentCamera
    if not camera then return end
    
    -- Sticky aim: keep same target for a bit
    if currentTarget and currentTarget ~= targetPart then
        local timeSinceLastTarget = tick() - lastTargetTime
        if timeSinceLastTarget < 0.5 then
            targetPart = currentTarget
        else
            currentTarget = targetPart
            lastTargetTime = tick()
        end
    else
        currentTarget = targetPart
        lastTargetTime = tick()
    end
    
    local targetPos = targetPart.Position
    local currentCFrame = camera.CFrame
    local targetCFrame = CFrame.new(currentCFrame.Position, targetPos)
    
    -- Smooth interpolation untuk aim lengket
    camera.CFrame = currentCFrame:Lerp(targetCFrame, aimSmoothness)
end

-- END OF PART 2
-- Lanjutkan dengan PART 3

-- BN XITERZ - PART 3 OF 4
-- SISTEM TELEPORT YANG DIPERBAIKI

-- Teleport Tab
local TeleportTab = Instance.new("ScrollingFrame")
TeleportTab.Size = UDim2.new(1, 0, 1, 0)
TeleportTab.BackgroundTransparency = 1
TeleportTab.ScrollBarThickness = 3
TeleportTab.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
TeleportTab.Visible = false
TeleportTab.CanvasSize = UDim2.new(0, 0, 0, 280)
TeleportTab.BorderSizePixel = 0
TeleportTab.Parent = TabContents

-- ========================================
-- KOORDINAT TELEPORT YANG DIPERBAIKI
-- ========================================
teleportPoints[1] = Vector3.new(-459.97, 3.74, 342.52)
teleportPoints[2] = Vector3.new(1174.82, 3.36, -26.25)
teleportPoints[3] = Vector3.new(521.43, 3.58, 592.97)
teleportPoints[4] = Vector3.new(731.95, 3.82, 416.19)
teleportPoints[5] = Vector3.new(915.70, 3.36, 81.71)

local teleportNames = {
    "SENJATA üî´",
    "KASINO ‚ô£",
    "BAHAN MS ‚òï",
    "DS üöò",
    "APARTEMEN üè¢"
}

-- FUNGSI TELEPORT BARU YANG SMOOTH
local function smoothTeleport(position)
    local character = LocalPlayer.Character
    if not character then return false end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    local humanoid = character:FindFirstChild("Humanoid")
    
    if not hrp or not humanoid or humanoid.Health <= 0 then
        warn("‚ùå Character tidak siap untuk teleport!")
        return false
    end
    
    -- SMOOTH TELEPORT EFFECT: Gerak seperti jalan tapi cepat
    local startPos = hrp.Position
    local endPos = position
    local distance = (endPos - startPos).Magnitude
    
    -- Jika jarak sangat jauh, gunakan teleport langsung
    if distance > 1000 then
        hrp.CFrame = CFrame.new(position)
        return true
    end
    
    -- Smooth teleport: bergerak dengan kecepatan tinggi
    local steps = math.max(10, math.floor(distance / 20))
    local stepVector = (endPos - startPos) / steps
    
    task.spawn(function()
        -- Nonaktifkan collision sementara untuk mencegah stuck
        hrp.CanCollide = false
        
        for i = 1, steps do
            if not character or not hrp then break end
            
            local nextPos = startPos + (stepVector * i)
            hrp.CFrame = CFrame.new(nextPos)
            
            -- Efek visual kecil
            local effect = Instance.new("Part")
            effect.Size = Vector3.new(1, 1, 1)
            effect.Position = hrp.Position
            effect.Transparency = 0.7
            effect.BrickColor = BrickColor.new("Bright blue")
            effect.Anchored = true
            effect.CanCollide = false
            effect.Parent = Workspace
            
            game:GetService("Debris"):AddItem(effect, 0.1)
            
            task.wait(0.01) -- Kecepatan teleport (dapat diatur)
        end
        
        -- Pastikan posisi akhir tepat
        hrp.CFrame = CFrame.new(endPos)
        hrp.CanCollide = true
        
        print("‚úÖ Smooth teleport selesai!")
    end)
    
    return true
end

local function createTeleportButton(index, yPosition)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -8, 0, 48)
    button.Position = UDim2.new(0, 4, 0, yPosition)
    button.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    button.BackgroundTransparency = 0.2
    button.BorderSizePixel = 0
    button.AutoButtonColor = false
    button.Text = ""
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(0, 100, 200)
    buttonStroke.Thickness = 1.5
    buttonStroke.Transparency = 0.5
    buttonStroke.Parent = button
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -16, 0, 20)
    title.Position = UDim2.new(0, 8, 0, 4)
    title.BackgroundTransparency = 1
    title.TextColor3 = Color3.fromRGB(255, 200, 100)
    title.Text = "TELEPORT " .. index .. " - " .. teleportNames[index]
    title.Font = Enum.Font.GothamBold
    title.TextSize = 11
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = button
    
    local coords = Instance.new("TextLabel")
    coords.Size = UDim2.new(1, -16, 0, 16)
    coords.Position = UDim2.new(0, 8, 0, 26)
    coords.BackgroundTransparency = 1
    coords.TextColor3 = Color3.fromRGB(180, 180, 180)
    coords.Text = string.format("X: %.0f  |  Y: %.0f  |  Z: %.0f", 
        teleportPoints[index].X, 
        teleportPoints[index].Y, 
        teleportPoints[index].Z)
    coords.Font = Enum.Font.Gotham
    coords.TextSize = 10
    coords.TextXAlignment = Enum.TextXAlignment.Left
    coords.Parent = button
    
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
        buttonStroke.Thickness = 2
        buttonStroke.Transparency = 0
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
        buttonStroke.Thickness = 1.5
        buttonStroke.Transparency = 0.5
    end)
    
    button.MouseButton1Click:Connect(function()
        print("üöÄ Memulai smooth teleport ke:", teleportNames[index])
        
        -- Animasi tombol
        button.BackgroundColor3 = Color3.fromRGB(0, 150, 100)
        
        task.spawn(function()
            local success = smoothTeleport(teleportPoints[index])
            
            if success then
                print("‚úÖ Smooth teleport berhasil ke:", teleportNames[index])
            else
                warn("‚ùå Gagal teleport!")
                button.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
            end
            
            task.wait(0.5)
            button.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
        end)
    end)
    
    button.Parent = TeleportTab
    return button
end

-- Create 5 teleport buttons
for i = 1, 5 do
    createTeleportButton(i, (i-1) * 54)
end

-- Spectate Tab
local SpectateTab = Instance.new("Frame")
SpectateTab.Size = UDim2.new(1, 0, 1, 0)
SpectateTab.BackgroundTransparency = 1
SpectateTab.Visible = false
SpectateTab.Parent = TabContents

local UsernameBox = Instance.new("TextBox")
UsernameBox.Size = UDim2.new(1, -70, 0, 32)
UsernameBox.Position = UDim2.new(0, 0, 0, 5)
UsernameBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
UsernameBox.TextColor3 = Color3.fromRGB(255, 255, 255)
UsernameBox.PlaceholderText = "Enter Username..."
UsernameBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
UsernameBox.Text = ""
UsernameBox.Font = Enum.Font.Gotham
UsernameBox.TextSize = 12
UsernameBox.ClearTextOnFocus = false
UsernameBox.Parent = SpectateTab

local TextBoxCorner = Instance.new("UICorner")
TextBoxCorner.CornerRadius = UDim.new(0, 6)
TextBoxCorner.Parent = UsernameBox

local SpectateButton = Instance.new("TextButton")
SpectateButton.Size = UDim2.new(0, 64, 0, 32)
SpectateButton.Position = UDim2.new(1, -64, 0, 5)
SpectateButton.BackgroundColor3 = Color3.fromRGB(0, 150, 100)
SpectateButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SpectateButton.Text = "VIEW"
SpectateButton.Font = Enum.Font.GothamBold
SpectateButton.TextSize = 11
SpectateButton.BorderSizePixel = 0
SpectateButton.Parent = SpectateTab

local SpectateCorner = Instance.new("UICorner")
SpectateCorner.CornerRadius = UDim.new(0, 6)
SpectateCorner.Parent = SpectateButton

local SpectateStatus = Instance.new("TextLabel")
SpectateStatus.Size = UDim2.new(1, 0, 0, 24)
SpectateStatus.Position = UDim2.new(0, 0, 0, 45)
SpectateStatus.BackgroundTransparency = 1
SpectateStatus.TextColor3 = Color3.fromRGB(255, 255, 255)
SpectateStatus.Text = "Status: Not Spectating"
SpectateStatus.Font = Enum.Font.Gotham
SpectateStatus.TextSize = 11
SpectateStatus.TextXAlignment = Enum.TextXAlignment.Left
SpectateStatus.Parent = SpectateTab

local TeleportToPlayerButton = Instance.new("TextButton")
TeleportToPlayerButton.Size = UDim2.new(1, 0, 0, 32)
TeleportToPlayerButton.Position = UDim2.new(0, 0, 0, 75)
TeleportToPlayerButton.BackgroundColor3 = Color3.fromRGB(100, 0, 150)
TeleportToPlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportToPlayerButton.Text = "TELEPORT TO PLAYER"
TeleportToPlayerButton.Font = Enum.Font.GothamBold
TeleportToPlayerButton.TextSize = 11
TeleportToPlayerButton.Visible = false
TeleportToPlayerButton.BorderSizePixel = 0
TeleportToPlayerButton.Parent = SpectateTab

local TeleportCorner = Instance.new("UICorner")
TeleportCorner.CornerRadius = UDim.new(0, 6)
TeleportCorner.Parent = TeleportToPlayerButton

SpectateButton.MouseButton1Click:Connect(function()
    local username = UsernameBox.Text
    if username == "" then return end
    
    for _, player in pairs(Players:GetPlayers()) do
        if string.lower(player.Name):find(string.lower(username)) or string.lower(player.DisplayName):find(string.lower(username)) then
            spectatingPlayer = player
            isSpectating = true
            SpectateStatus.Text = "Status: Spectating " .. player.Name
            TeleportToPlayerButton.Visible = true
            print("Now spectating:", player.Name)
            return
        end
    end
    
    SpectateStatus.Text = "Status: Player not found"
    TeleportToPlayerButton.Visible = false
end)

TeleportToPlayerButton.MouseButton1Click:Connect(function()
    if not spectatingPlayer or not spectatingPlayer.Character then 
        SpectateStatus.Text = "Status: Player unavailable"
        return 
    end
    
    local targetPos = spectatingPlayer.Character:FindFirstChild("HumanoidRootPart")
    if targetPos and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        smoothTeleport(targetPos.Position + Vector3.new(0, 0, 3))
        print("Teleported to player:", spectatingPlayer.Name)
        SpectateStatus.Text = "Status: Teleported to " .. spectatingPlayer.Name
    end
end)

-- Buy Tab
local BuyTab = Instance.new("Frame")
BuyTab.Size = UDim2.new(1, 0, 1, 0)
BuyTab.BackgroundTransparency = 1
BuyTab.Visible = false
BuyTab.Parent = TabContents

local BuyText = Instance.new("TextLabel")
BuyText.Size = UDim2.new(1, 0, 0.5, 0)
BuyText.Position = UDim2.new(0, 0, 0.25, 0)
BuyText.BackgroundTransparency = 1
BuyText.TextColor3 = Color3.fromRGB(255, 255, 255)
BuyText.Text = "BUY SECTION\nComing Soon..."
BuyText.Font = Enum.Font.GothamBold
BuyText.TextSize = 16
BuyText.TextWrapped = true
BuyText.Parent = BuyTab

-- END OF PART 3
-- Lanjutkan dengan PART 4

-- BN XITERZ - PART 4 OF 4 (FINAL)

-- Tab switching system
local tabButtons = {}
for i, tabName in ipairs(Tabs) do
    local button = createTabButton(tabName, i)
    tabButtons[tabName] = button
    
    button.MouseButton1Click:Connect(function()
        CurrentTab = tabName
        
        -- Hide all tabs
        InformationTab.Visible = false
        AimTab.Visible = false
        TeleportTab.Visible = false
        SpectateTab.Visible = false
        BuyTab.Visible = false
        
        -- Update button colors
        for _, btn in pairs(tabButtons) do
            btn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
            btn.TextColor3 = Color3.fromRGB(200, 200, 200)
        end
        
        -- Show selected tab
        if tabName == "Information" then
            InformationTab.Visible = true
        elseif tabName == "Aim" then
            AimTab.Visible = true
        elseif tabName == "Teleport" then
            TeleportTab.Visible = true
        elseif tabName == "Spectate" then
            SpectateTab.Visible = true
        elseif tabName == "Buy" then
            BuyTab.Visible = true
        end
        
        -- Highlight active button
        button.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
    end)
end

-- Set initial tab
if tabButtons["Information"] then
    tabButtons["Information"].BackgroundColor3 = Color3.fromRGB(0, 100, 200)
    tabButtons["Information"].TextColor3 = Color3.fromRGB(255, 255, 255)
end

-- Close/Minimize Button
CloseButton.MouseButton1Click:Connect(function()
    isMenuOpen = not isMenuOpen
    
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    if isMenuOpen then
        MainFrame.Visible = true
        MiniIcon.Visible = false
        MainFrame.Size = UDim2.new(0, 480, 0, 270)
    else
        local tween = TweenService:Create(MainFrame, tweenInfo, {Size = UDim2.new(0, 0, 0, 0)})
        tween:Play()
        tween.Completed:Connect(function()
            MainFrame.Visible = false
            MiniIcon.Visible = true
        end)
    end
end)

-- Mini Icon Click
MiniIcon.MouseButton1Click:Connect(function()
    isMenuOpen = true
    MainFrame.Visible = true
    MainFrame.Size = UDim2.new(0, 0, 0, 0)
    
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(MainFrame, tweenInfo, {Size = UDim2.new(0, 480, 0, 270)})
    tween:Play()
    
    MiniIcon.Visible = false
end)

-- Dragging functionality
Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isDragging = true
        dragStart = input.Position
        mainStartPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                isDragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if isDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(
            mainStartPos.X.Scale,
            mainStartPos.X.Offset + delta.X,
            mainStartPos.Y.Scale,
            mainStartPos.Y.Offset + delta.Y
        )
    end
end)

-- Mini icon dragging
MiniIcon.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isDragging = true
        dragStart = input.Position
        iconStartPos = MiniIcon.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                isDragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if isDragging and input.UserInputType == Enum.UserInputType.MouseMovement and MiniIcon.Visible then
        local delta = input.Position - dragStart
        MiniIcon.Position = UDim2.new(
            iconStartPos.X.Scale,
            iconStartPos.X.Offset + delta.X,
            iconStartPos.Y.Scale,
            iconStartPos.Y.Offset + delta.Y
        )
    end
end)

-- Spectate Loop
RunService.RenderStepped:Connect(function()
    if isSpectating and spectatingPlayer and spectatingPlayer.Character then
        local targetChar = spectatingPlayer.Character
        local targetHRP = targetChar:FindFirstChild("HumanoidRootPart")
        
        if targetHRP and Workspace.CurrentCamera then
            Workspace.CurrentCamera.CFrame = CFrame.new(
                targetHRP.Position + Vector3.new(0, 5, 10),
                targetHRP.Position
            )
        end
    end
end)

-- IMPROVED AIM ASSIST LOOP (Sticky Camera Aim)
RunService.RenderStepped:Connect(function()
    if aimEnabled then
        local target = findNearestEnemy()
        if target then
            smoothAimAt(target)
        else
            currentTarget = nil
        end
    end
end)

-- Stop spectating when player leaves
Players.PlayerRemoving:Connect(function(player)
    if player == spectatingPlayer then
        isSpectating = false
        spectatingPlayer = nil
        if SpectateStatus then
            SpectateStatus.Text = "Status: Player left the game"
        end
        if TeleportToPlayerButton then
            TeleportToPlayerButton.Visible = false
        end
        
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            Workspace.CurrentCamera.CameraSubject = LocalPlayer.Character.Humanoid
        end
    end
end)

-- Reset camera when character respawns
LocalPlayer.CharacterAdded:Connect(function(character)
    if not isSpectating then
        local humanoid = character:WaitForChild("Humanoid")
        Workspace.CurrentCamera.CameraSubject = humanoid
    end
    currentTarget = nil
end)

-- Anti-AFK
local VirtualUser = game:GetService("VirtualUser")
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Success message
print("‚úÖ BN XITERZ V2.0 Loaded Successfully!")
print("üë§ Developer: Nazam Official")
print("üë• Co-Developer: Birul")
print("üì± Version: 2.0 - Enhanced Aim System")
print("üìê UI Ratio: 16:9")
print("")
print("üéØ FITUR BARU:")
print("‚Ä¢ Camera-based Smooth Aim")
print("‚Ä¢ Sticky Target Lock")
print("‚Ä¢ Adjustable Range (50-500 studs)")
print("‚Ä¢ Adjustable Smoothness (0-50)")
print("‚Ä¢ SMOOTH TELEPORT SYSTEM (jalan tapi cepat)")
print("‚Ä¢ Works with FPS and TPS view")
print("")
print("üí° CARA PAKAI AIM:")
print("1. Buka tab 'Aim'")
print("2. Enable Aim Assist")
print("3. Pilih HEAD atau BODY")
print("4. Atur Range dan Smoothness")
print("5. Aim otomatis mengikuti musuh terdekat!")
print("")
print("üöÄ CARA PAKAI TELEPORT:")
print("1. Buka tab 'Teleport'")
print("2. Pilih lokasi yang diinginkan")
print("3. Sistem akan teleport dengan efek smooth")
print("4. Tidak akan kembali ke tempat awal!")

-- END OF PART 4 (SCRIPT COMPLETE)
-- Script selesai! Semua fitur sudah aktif dengan sistem aim yang diperbaiki!
