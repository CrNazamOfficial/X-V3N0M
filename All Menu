-- TELEPORT V1.0 by Nazam Official - DRAGGABLE GUI + TOGGLE MENU
-- Hitam Merah Putih Theme

local TeleportV1 = {
    positions = {},
    maxPositions = 3,
    currentSelected = 1,
    antiCheatBypass = true,
    deleteMode = false,
    menuVisible = true
}
 
local GUI = {
    mainColor = Color3.fromRGB(20, 20, 20),      -- Hitam
    secondaryColor = Color3.fromRGB(255, 255, 255), -- Putih
    accentColor = Color3.fromRGB(200, 0, 0),     -- Merah
    successColor = Color3.fromRGB(0, 180, 0),    -- Hijau untuk status active
    warningColor = Color3.fromRGB(255, 50, 50)   -- Merah muda untuk status belum set
}

local Sizes = {
    mainFrame = UDim2.new(0, 350, 0, 450),
    titleHeight = 45,
    posFrameHeight = 85,
    buttonHeight = 35,
    spacing = 15,
    menuIconSize = 50
}

-- ANTI-CHEAT BYPASS SYSTEM (tetap sama)
local function bypassAntiCheat()
    if not TeleportV1.antiCheatBypass then return end
    
    pcall(function()
        if not getgenv().namecallHooked then
            local oldNamecall
            oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
                local method = getnamecallmethod()
                local args = {...}
                
                if method and tostring(method):lower():find("teleport") then
                    return true
                end
                
                if method and (tostring(method):lower():find("check") or tostring(method):lower():find("validate")) then
                    return true
                end
                
                if method and tostring(method):lower():find("kick") or tostring(method):lower():find("report") then
                    return nil
                end
                
                return oldNamecall(self, ...)
            end)
            getgenv().namecallHooked = true
        end
    end)
    
    -- ... (rest of anti-cheat code tetap sama)
end

function TeleportV1:createMenuIcon()
    -- Menu Icon yang bisa digeser
    local menuIcon = Instance.new("TextButton")
    menuIcon.Size = UDim2.new(0, Sizes.menuIconSize, 0, Sizes.menuIconSize)
    menuIcon.Position = UDim2.new(0, 20, 0, 20)
    menuIcon.BackgroundColor3 = GUI.accentColor
    menuIcon.TextColor3 = GUI.secondaryColor
    menuIcon.Text = "☰"
    menuIcon.Font = Enum.Font.GothamBold
    menuIcon.TextSize = 20
    menuIcon.AutoButtonColor = true
    menuIcon.Name = "MenuIcon"
    menuIcon.ZIndex = 10
    menuIcon.Parent = self.gui
    
    local iconCorner = Instance.new("UICorner")
    iconCorner.CornerRadius = UDim.new(0, 8)
    iconCorner.Parent = menuIcon
    
    local iconStroke = Instance.new("UIStroke")
    iconStroke.Color = GUI.secondaryColor
    stroke.Thickness = 2
    iconStroke.Parent = menuIcon
    
    -- Drag functionality untuk menu icon
    local dragging = false
    local dragInput, dragStart, startPos
    
    menuIcon.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = menuIcon.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    menuIcon.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            menuIcon.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- Toggle menu functionality
    menuIcon.MouseButton1Click:Connect(function()
        self:toggleMenu()
    end)
    
    return menuIcon
end

function TeleportV1:createMainFrame()
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = Sizes.mainFrame
    mainFrame.Position = UDim2.new(0, 20, 0.5, -Sizes.mainFrame.Y.Scale/2)
    mainFrame.BackgroundColor3 = GUI.mainColor
    mainFrame.BackgroundTransparency = 0.05
    mainFrame.BorderSizePixel = 0
    mainFrame.ClipsDescendants = true
    mainFrame.Visible = self.menuVisible
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = self.gui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = mainFrame
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = GUI.accentColor
    stroke.Thickness = 2
    stroke.Parent = mainFrame
    
    -- Title bar dengan close button dan drag functionality
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, Sizes.titleHeight)
    titleBar.Position = UDim2.new(0, 0, 0, 0)
    titleBar.BackgroundColor3 = GUI.accentColor
    titleBar.BorderSizePixel = 0
    titleBar.Name = "TitleBar"
    titleBar.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 8)
    titleCorner.Parent = titleBar
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(0.7, 0, 1, 0)
    titleLabel.Position = UDim2.new(0.05, 0, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextColor3 = GUI.secondaryColor
    titleLabel.Text = "TELEPORT V1.0 - Nazam Official"
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 16
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = titleBar
    
    -- Close button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 30, 0, 30)
    closeBtn.Position = UDim2.new(0.9, 0, 0.5, -15)
    closeBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    closeBtn.TextColor3 = GUI.secondaryColor
    closeBtn.Text = "✕"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 16
    closeBtn.AutoButtonColor = true
    closeBtn.Name = "CloseBtn"
    closeBtn.Parent = titleBar
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 6)
    closeCorner.Parent = closeBtn
    
    -- Drag functionality untuk main frame
    local dragging = false
    local dragInput, dragStart, startPos
    
    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    titleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- Close button functionality
    closeBtn.MouseButton1Click:Connect(function()
        self:toggleMenu()
    end)
    
    return mainFrame
end

function TeleportV1:toggleMenu()
    self.menuVisible = not self.menuVisible
    local mainFrame = self.gui:FindFirstChild("MainFrame")
    local menuIcon = self.gui:FindFirstChild("MenuIcon")
    
    if mainFrame then
        mainFrame.Visible = self.menuVisible
    end
    
    if menuIcon then
        menuIcon.Visible = not self.menuVisible
    end
end

function TeleportV1:createGUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "TeleportV1_NazamOfficial"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    
    -- Create menu icon pertama (akan hidden ketika menu terbuka)
    self.gui = screenGui
    local menuIcon = self:createMenuIcon()
    
    -- Create main frame
    local mainFrame = self:createMainFrame()
    
    -- Scroll frame dan content (sama seperti sebelumnya dengan tema baru)
    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Size = UDim2.new(1, 0, 1, -Sizes.titleHeight - 100)
    scrollFrame.Position = UDim2.new(0, 0, 0, Sizes.titleHeight)
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.BorderSizePixel = 0
    scrollFrame.ScrollBarThickness = 4
    scrollFrame.ScrollBarImageColor3 = GUI.accentColor
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, Sizes.posFrameHeight * self.maxPositions + Sizes.spacing * (self.maxPositions - 1))
    scrollFrame.Parent = mainFrame
    
    -- Position buttons dengan tema hitam-merah-putih
    for i = 1, self.maxPositions do
        local yPosition = (i - 1) * (Sizes.posFrameHeight + Sizes.spacing)
        
        local posFrame = Instance.new("Frame")
        posFrame.Size = UDim2.new(0.9, 0, 0, Sizes.posFrameHeight)
        posFrame.Position = UDim2.new(0.05, 0, 0, yPosition)
        posFrame.BackgroundColor3 = GUI.secondaryColor
        posFrame.BackgroundTransparency = 0.1
        posFrame.BorderSizePixel = 0
        posFrame.Parent = scrollFrame
        
        local posFrameCorner = Instance.new("UICorner")
        posFrameCorner.CornerRadius = UDim.new(0, 6)
        posFrameCorner.Parent = posFrame
        
        local posFrameStroke = Instance.new("UIStroke")
        posFrameStroke.Color = GUI.accentColor
        posFrameStroke.Thickness = 1
        posFrameStroke.Parent = posFrame
        
        local posLabel = Instance.new("TextLabel")
        posLabel.Size = UDim2.new(0.6, 0, 0.5, 0)
        posLabel.Position = UDim2.new(0.05, 0, 0.1, 0)
        posLabel.BackgroundTransparency = 1
        posLabel.TextColor3 = GUI.mainColor
        posLabel.Text = "POSISI "..i.." [BELUM DI SET]"
        posLabel.Font = Enum.Font.GothamSemibold
        posLabel.TextSize = 14
        posLabel.TextXAlignment = Enum.TextXAlignment.Left
        posLabel.Name = "PosLabel"..i
        posLabel.Parent = posFrame
        
        local statusIndicator = Instance.new("Frame")
        statusIndicator.Size = UDim2.new(0.8, 0, 0, 3)
        statusIndicator.Position = UDim2.new(0.05, 0, 0.6, 0)
        statusIndicator.BackgroundColor3 = GUI.warningColor
        statusIndicator.BorderSizePixel = 0
        statusIndicator.Name = "StatusIndicator"..i
        statusIndicator.Parent = posFrame
        
        local buttonContainer = Instance.new("Frame")
        buttonContainer.Size = UDim2.new(0.35, 0, 0.7, 0)
        buttonContainer.Position = UDim2.new(0.6, 0, 0.15, 0)
        buttonContainer.BackgroundTransparency = 1
        buttonContainer.Parent = posFrame
        
        local teleportBtn = Instance.new("TextButton")
        teleportBtn.Size = UDim2.new(1, 0, 0.45, 0)
        teleportBtn.Position = UDim2.new(0, 0, 0, 0)
        teleportBtn.BackgroundColor3 = GUI.accentColor
        teleportBtn.TextColor3 = GUI.secondaryColor
        teleportBtn.Text = "TELEPORT"
        teleportBtn.Font = Enum.Font.GothamBold
        teleportBtn.TextSize = 12
        teleportBtn.AutoButtonColor = true
        teleportBtn.Name = "TeleportBtn"..i
        teleportBtn.Parent = buttonContainer
        
        local teleportCorner = Instance.new("UICorner")
        teleportCorner.CornerRadius = UDim.new(0, 4)
        teleportCorner.Parent = teleportBtn
        
        local setBtn = Instance.new("TextButton")
        setBtn.Size = UDim2.new(1, 0, 0.45, 0)
        setBtn.Position = UDim2.new(0, 0, 0.55, 0)
        setBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        setBtn.TextColor3 = GUI.secondaryColor
        setBtn.Text = "SET POSISI"
        setBtn.Font = Enum.Font.GothamBold
        setBtn.TextSize = 11
        setBtn.AutoButtonColor = true
        setBtn.Name = "SetBtn"..i
        setBtn.Parent = buttonContainer
        
        local setCorner = Instance.new("UICorner")
        setCorner.CornerRadius = UDim.new(0, 4)
        setCorner.Parent = setBtn
        
        local deleteBtn = Instance.new("TextButton")
        deleteBtn.Size = UDim2.new(0, 25, 0, 25)
        deleteBtn.Position = UDim2.new(0.9, 0, 0.1, 0)
        deleteBtn.BackgroundColor3 = GUI.accentColor
        deleteBtn.TextColor3 = GUI.secondaryColor
        deleteBtn.Text = "✕"
        deleteBtn.Font = Enum.Font.GothamBold
        deleteBtn.TextSize = 14
        deleteBtn.AutoButtonColor = true
        deleteBtn.Name = "DeleteBtn"..i
        deleteBtn.Visible = false
        deleteBtn.ZIndex = 2
        deleteBtn.Parent = posFrame
        
        local deleteCorner = Instance.new("UICorner")
        deleteCorner.CornerRadius = UDim.new(0, 12)
        deleteCorner.Parent = deleteBtn
    end
    
    -- Control buttons
    local controlFrame = Instance.new("Frame")
    controlFrame.Size = UDim2.new(1, 0, 0, 100)
    controlFrame.Position = UDim2.new(0, 0, 1, -100)
    controlFrame.BackgroundTransparency = 1
    controlFrame.Parent = mainFrame
    
    local changePosBtn = Instance.new("TextButton")
    changePosBtn.Size = UDim2.new(0.9, 0, 0, Sizes.buttonHeight)
    changePosBtn.Position = UDim2.new(0.05, 0, 0.1, 0)
    changePosBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
    changePosBtn.TextColor3 = GUI.secondaryColor
    changePosBtn.Text = "CHANGE POSISI"
    changePosBtn.Font = Enum.Font.GothamBold
    changePosBtn.TextSize = 14
    changePosBtn.AutoButtonColor = true
    changePosBtn.Name = "ChangePosBtn"
    changePosBtn.Parent = controlFrame
    
    local changeCorner = Instance.new("UICorner")
    changeCorner.CornerRadius = UDim.new(0, 6)
    changeCorner.Parent = changePosBtn
    
    local deleteModeBtn = Instance.new("TextButton")
    deleteModeBtn.Size = UDim2.new(0.9, 0, 0, Sizes.buttonHeight)
    deleteModeBtn.Position = UDim2.new(0.05, 0, 0.55, 0)
    deleteModeBtn.BackgroundColor3 = GUI.accentColor
    deleteModeBtn.TextColor3 = GUI.secondaryColor
    deleteModeBtn.Text = "DELLET POSISI"
    deleteModeBtn.Font = Enum.Font.GothamBold
    deleteModeBtn.TextSize = 14
    deleteModeBtn.AutoButtonColor = true
    deleteModeBtn.Name = "DeleteModeBtn"
    deleteModeBtn.Parent = controlFrame
    
    local deleteModeCorner = Instance.new("UICorner")
    deleteModeCorner.CornerRadius = UDim.new(0, 6)
    deleteModeCorner.Parent = deleteModeBtn
    
    -- Sembunyikan menu icon jika menu visible
    menuIcon.Visible = not self.menuVisible
    
    return screenGui
end

-- [Fungsi lainnya tetap sama: setPosition, teleportToPosition, deletePosition, updateGUI, setupEvents, init]

function TeleportV1:setPosition(index)
    if index > self.maxPositions then return end
    
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        self.positions[index] = character.HumanoidRootPart.CFrame
        self.currentSelected = index
        self:updateGUI()
    end
end

function TeleportV1:teleportToPosition(index)
    if not self.positions[index] then return end
    
    bypassAntiCheat()
    
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local rootPart = character.HumanoidRootPart
        
        pcall(function()
            rootPart.CFrame = self.positions[index]
        end)
        
        wait(0.1)
        pcall(function()
            character:SetPrimaryPartCFrame(self.positions[index])
        end)
        
        wait(0.05)
        pcall(function()
            rootPart.Position = self.positions[index].Position
        end)
    end
end

function TeleportV1:deletePosition(index)
    self.positions[index] = nil
    self:updateGUI()
end

function TeleportV1:updateGUI()
    for i = 1, self.maxPositions do
        local posLabel = self.gui:FindFirstChild("PosLabel"..i, true)
        local statusIndicator = self.gui:FindFirstChild("StatusIndicator"..i, true)
        
        if posLabel and statusIndicator then
            if self.positions[i] then
                posLabel.Text = "POSISI "..i.." [ACTIVE]"
                posLabel.TextColor3 = GUI.successColor
                statusIndicator.BackgroundColor3 = GUI.successColor
            else
                posLabel.Text = "POSISI "..i.." [BELUM DI SET]"
                posLabel.TextColor3 = GUI.warningColor
                statusIndicator.BackgroundColor3 = GUI.warningColor
            end
        end
    end
end

function TeleportV1:setupEvents()
    for i = 1, self.maxPositions do
        local setBtn = self.gui:FindFirstChild("SetBtn"..i, true)
        local teleportBtn = self.gui:FindFirstChild("TeleportBtn"..i, true)
        local deleteBtn = self.gui:FindFirstChild("DeleteBtn"..i, true)
        
        if setBtn then
            setBtn.MouseButton1Click:Connect(function()
                self:setPosition(i)
            end)
        end
        
        if teleportBtn then
            teleportBtn.MouseButton1Click:Connect(function()
                self:teleportToPosition(i)
            end)
        end
        
        if deleteBtn then
            deleteBtn.MouseButton1Click:Connect(function()
                self:deletePosition(i)
                deleteBtn.Visible = false
            end)
        end
    end
    
    local deleteModeBtn = self.gui:FindFirstChild("DeleteModeBtn", true)
    if deleteModeBtn then
        deleteModeBtn.MouseButton1Click:Connect(function()
            self.deleteMode = not self.deleteMode
            for i = 1, self.maxPositions do
                local deleteBtn = self.gui:FindFirstChild("DeleteBtn"..i, true)
                if deleteBtn then
                    deleteBtn.Visible = self.deleteMode
                end
            end
        end)
    end
end

function TeleportV1:init()
    self.gui = self:createGUI()
    self:setupEvents()
    bypassAntiCheat()
end

-- Initialize system
TeleportV1:init()
