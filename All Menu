-- X-V3N0M Teleport System by Nazam Official
-- Version 1.0

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Data storage
local savedPositions = {}
local isAutoRunning = false
local currentIndex = 1
local isUIVisible = true

-- Create main screen GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "X_V3N0M_Teleport"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main frame (220x280 pixels - UKURAN ASLI)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 220, 0, 280)
mainFrame.Position = UDim2.new(0, 50, 0, 50)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.BorderSizePixel = 2
mainFrame.BorderColor3 = Color3.fromRGB(255, 0, 0)
mainFrame.Active = true
mainFrame.Draggable = true

-- Title bar
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 25)
titleBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
titleBar.BorderSizePixel = 0

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -25, 1, 0)
titleLabel.Position = UDim2.new(0, 5, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "X - V3N0M"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 20, 0, 20)
closeButton.Position = UDim2.new(1, -25, 0, 2)
closeButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Text = "X"
closeButton.TextScaled = true

-- Mini icon (hidden initially) - 30x30 pixels
local miniIcon = Instance.new("TextButton")
miniIcon.Size = UDim2.new(0, 30, 0, 30)
miniIcon.Position = UDim2.new(0, 10, 0, 10)
miniIcon.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
miniIcon.TextColor3 = Color3.fromRGB(255, 255, 255)
miniIcon.Text = "X"
miniIcon.TextScaled = true
miniIcon.Visible = false

-- Left side - Positions list (60% width)
local positionsFrame = Instance.new("ScrollingFrame")
positionsFrame.Size = UDim2.new(0.6, -5, 1, -30)
positionsFrame.Position = UDim2.new(0, 5, 0, 30)
positionsFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
positionsFrame.BorderSizePixel = 0
positionsFrame.ScrollBarThickness = 6
positionsFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

-- Right side - Control buttons (40% width)
local controlsFrame = Instance.new("Frame")
controlsFrame.Size = UDim2.new(0.4, -5, 1, -30)
controlsFrame.Position = UDim2.new(0.6, 0, 0, 30)
controlsFrame.BackgroundTransparency = 1

-- Function to create control buttons (32 pixels height)
function createControlButton(text, index)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, 0, 0, 32)
	button.Position = UDim2.new(0, 0, 0, index * 37)
	button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	button.BorderColor3 = Color3.fromRGB(255, 0, 0)
	button.BorderSizePixel = 1
	button.Text = text
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.TextScaled = true
	button.Font = Enum.Font.GothamBold
	button.Parent = controlsFrame
	
	return button
end

-- Create control buttons
local startButton = createControlButton("START", 0)
local setPosButton = createControlButton("SET POSISI", 1)
local stopButton = createControlButton("STOP", 2)
local loadButton = createControlButton("LOAD", 3)

-- Function to create position item (36 pixels height)
function createPositionItem(index, position)
	local itemFrame = Instance.new("Frame")
	itemFrame.Size = UDim2.new(1, -10, 0, 36)
	itemFrame.Position = UDim2.new(0, 5, 0, (index-1) * 41)
	itemFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	itemFrame.BorderSizePixel = 1
	itemFrame.BorderColor3 = Color3.fromRGB(100, 100, 100)
	
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(0.5, -5, 1, 0)
	label.Position = UDim2.new(0, 5, 0, 0)
	label.BackgroundTransparency = 1
	label.Text = "Set Posisi " .. index
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.TextScaled = true
	label.Font = Enum.Font.Gotham
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = itemFrame
	
	local tpButton = Instance.new("TextButton")
	tpButton.Size = UDim2.new(0, 25, 0, 20)
	tpButton.Position = UDim2.new(0.5, 5, 0.5, -10)
	tpButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
	tpButton.Text = "TP"
	tpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	tpButton.TextScaled = true
	tpButton.Font = Enum.Font.GothamBold
	tpButton.Parent = itemFrame
	
	local deleteButton = Instance.new("TextButton")
	deleteButton.Size = UDim2.new(0, 40, 0, 20)
	deleteButton.Position = UDim2.new(0.75, 5, 0.5, -10)
	deleteButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
	deleteButton.Text = "Hapus"
	deleteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	deleteButton.TextScaled = true
	deleteButton.Font = Enum.Font.GothamBold
	deleteButton.Parent = itemFrame
	
	-- TP button functionality
	tpButton.MouseButton1Click:Connect(function()
		teleportToPosition(position)
	end)
	
	-- Delete button functionality
	deleteButton.MouseButton1Click:Connect(function()
		table.remove(savedPositions, index)
		updatePositionsList()
	end)
	
	return itemFrame
end

-- Function to update positions list
function updatePositionsList()
	-- Clear existing items
	for _, child in pairs(positionsFrame:GetChildren()) do
		if child:IsA("Frame") then
			child:Destroy()
		end
	end
	
	-- Recreate items
	local totalHeight = 0
	for i, pos in ipairs(savedPositions) do
		local item = createPositionItem(i, pos)
		item.Parent = positionsFrame
		totalHeight = totalHeight + 41
	end
	
	positionsFrame.CanvasSize = UDim2.new(0, 0, 0, math.max(totalHeight, positionsFrame.AbsoluteSize.Y))
end

-- Function to teleport to position
function teleportToPosition(position)
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		player.Character.HumanoidRootPart.CFrame = position
	end
end

-- Function for internal teleport (for auto system)
function internalTeleport(position)
	-- Internal teleport untuk sistem otomatis
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		local rootPart = player.Character.HumanoidRootPart
		
		-- Simpan posisi visual saat ini
		local visualPosition = rootPart.Position
		
		-- Lakukan teleport internal
		rootPart.CFrame = position
		
		-- Tunggu sebentar untuk deteksi checkpoint
		wait(0.1)
		
		-- Kembali ke posisi visual (opsional, tergantung kebutuhan)
		-- rootPart.CFrame = CFrame.new(visualPosition)
	end
end

-- Auto teleport system
coroutine.wrap(function()
	while true do
		if isAutoRunning and #savedPositions > 0 then
			internalTeleport(savedPositions[currentIndex])
			
			currentIndex = currentIndex + 1
			if currentIndex > #savedPositions then
				currentIndex = 1
			end
			
			-- Delay untuk menghindari deteksi cheat
			wait(0.8)
		else
			wait(0.1)
		end
	end
end)()

-- Button functionalities
setPosButton.MouseButton1Click:Connect(function()
	local character = player.Character
	if character and character:FindFirstChild("HumanoidRootPart") then
		local position = character.HumanoidRootPart.CFrame
		table.insert(savedPositions, position)
		updatePositionsList()
		
		-- Visual feedback
		setPosButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
		wait(0.3)
		setPosButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	end
end)

startButton.MouseButton1Click:Connect(function()
	if #savedPositions > 0 then
		isAutoRunning = true
		startButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
	else
		-- Visual feedback tanpa notifikasi spam
		startButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
		wait(0.5)
		startButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	end
end)

stopButton.MouseButton1Click:Connect(function()
	isAutoRunning = false
	startButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	
	-- Visual feedback
	stopButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	wait(0.3)
	stopButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
end)

loadButton.MouseButton1Click:Connect(function()
	-- Load functionality - reset dan buat baru
	savedPositions = {}
	currentIndex = 1
	updatePositionsList()
	
	-- Visual feedback
	loadButton.BackgroundColor3 = Color3.fromRGB(0, 100, 100)
	wait(0.3)
	loadButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
end)

closeButton.MouseButton1Click:Connect(function()
	toggleUI()
end)

miniIcon.MouseButton1Click:Connect(function()
	toggleUI()
end)

-- Function to toggle UI visibility
function toggleUI()
	isUIVisible = not isUIVisible
	
	if isUIVisible then
		mainFrame.Visible = true
		miniIcon.Visible = false
	else
		mainFrame.Visible = false
		miniIcon.Visible = true
	end
end

-- Assemble UI
titleLabel.Parent = titleBar
closeButton.Parent = titleBar
titleBar.Parent = mainFrame
positionsFrame.Parent = mainFrame
controlsFrame.Parent = mainFrame
miniIcon.Parent = screenGui
mainFrame.Parent = screenGui
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Initial update
updatePositionsList()

print("X-V3N0M Teleport System Loaded - by Nazam Official")
